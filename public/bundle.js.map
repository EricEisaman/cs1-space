{"version":3,"file":"bundle.js","sources":["../src/core/load/load-spinner.js","../src/core/components/grabbable.js","../src/core/components/nav-pointer.js","../src/core/components/weather-viz.js","../src/core/components/shaderfrog/shader-frog.js","../src/stats/elements/ring-dial.js","../src/stats/elements/meter.js","../src/core/login/login.js","../src/demo/components/cloud.js","../src/demo/components/dotrow.js","../src/core/components/log.js","../src/core/components/launchable.js","../src/demo/components/launchrow.js","../src/core/components/vrui/controls.js","../src/core/components/vrui/vrui.js","../src/core/components/chat.js","../src/core/components/cs1-jukebox.js","../src/com/components/alongpath.js","../src/core/components/my-components.js","../src/main.js","../src/core/utils/utils.js","../src/demo/components/proximity-glitch.js","../src/stats/stats.js","../src/core/components/game.js","../src/core/components/player.js","../src/core/services/bgm.js","../src/core/socket/client-socket.js","../src/core/components/collectible.js","../src/demo/components/npc.js","../src/core/components/userdata.js","../src/demo/components/iot-api.js"],"sourcesContent":["export default(()=>{\n\n  window.addEventListener('load', function () {\n    let loadSpinner = document.createElement('div');\n    loadSpinner.className = 'lds-grid';\n    for(let i=0;i<9;i++){\n      loadSpinner.appendChild(document.createElement('div'));\n    } \n    loadSpinner.style.left = window.innerWidth/2 - 32 + 'px';\n    let loadingScreen =  document.querySelector('#loading-screen');\n    loadingScreen.style.width = window.innerWidth + 'px';\n    loadingScreen.style.height = window.innerHeight + 'px';\n    loadingScreen.appendChild(loadSpinner);\n  }, false);\n  \n})()","function findComponent(componentName) {\n  return document.querySelector(`[${componentName}]`).components[componentName];\n}\n//Moves the subject to a new parent while preserving its transform in the world\nfunction reparentObject3D(subject, newParent) {\n  subject.updateMatrixWorld();\n  subject.matrix.copy(subject.matrixWorld);\n  subject.applyMatrix(new THREE.Matrix4().getInverse(newParent.matrixWorld));\n  newParent.add(subject);\n}\n// Copys the world transforms between objects even if the have different parents\nvar copyTransform = (function() {\n  var scratchMat = new THREE.Matrix4();\n  return function(source, destination) {\n    destination.matrix.copy(source.matrixWorld);\n    destination.applyMatrix(\n      scratchMat.getInverse(destination.parent.matrixWorld)\n    );\n  };\n})();\nfunction toVector(o) {\n  return new THREE.Vector3(o.x, o.y, o.z);\n}\nfunction toList(collection) {\n  var list = [];\n  for (var i = 0; i < collection.length; i++) {\n    list.push(collection[i]);\n  }\n  return list;\n}\nfunction addDot(el, position, radius, color) {\n  color = color || \"red\";\n  var dot = document.createElement(\"a-sphere\");\n  dot.setAttribute(\"radius\", radius);\n  dot.setAttribute(\"position\", position);\n  dot.setAttribute(\"color\", color);\n  el.appendChild(dot);\n}\nfunction directionLocalToWorld(object, localDirection) {\n  return localDirection.transformDirection(object.matrixWorld);\n}\n\nexport default (function grabbable() {\n  AFRAME.registerSystem(\"grabbable\", {\n    schema: {}, // System schema. Parses into `this.data`.\n\n    init: function() {\n      //use object to allow for further development\n      CS1.grabbables = {};\n\n      CS1.__updateGrabbables = grabbablesData => {\n        if (\n          Object.keys(CS1.grabbables).length === 0 ||\n          !CS1.grabbables[grabbablesData[0].name] ||\n          !CS1.game.hasBegun\n        )\n          return;\n        grabbablesData.forEach((d, index) => {\n          let b = CS1.grabbables[d.name];\n          if (CS1.debug) {\n            console.log(\"Individual body data from server:\");\n            console.log(d);\n          }\n          if (d.position) b.object3D.position.copy(d.position);\n          if (d.scale) b.object3D.scale.copy(d.scale);\n          if (d.rotation) b.object3D.quaternion.copy(d.rotation);\n        });\n      };\n\n      CS1.socket.on(\"add-grabbable-primitive\", d => {\n        if (d.origin == CS1.socket.id) return;\n        const entity = document.createElement(d.type);\n        entity.setAttribute(\"grabbable\", \"remote:true\");\n        entity.object3D.position.set(\n          d.data.position.x,\n          d.data.position.y,\n          d.data.position.z\n        );\n        entity.object3D.scale.set(\n          d.data.scale.x,\n          d.data.scale.y,\n          d.data.scale.z\n        );\n        entity.object3D.setRotationFromQuaternion(\n          new THREE.Quaternion(\n            d.data.rotation.x,\n            d.data.rotation.y,\n            d.data.rotation.z,\n            d.data.rotation.w\n          )\n        );\n        entity.soundState = d.data.soundState;\n        console.log(\"adding remote late grabbable\");\n        if (d.custom) {\n          for (let [key, value] of Object.entries(d.custom)) {\n            if (value) entity.setAttribute(key, value);\n            if (key == \"collectible\") {\n              console.log(\"detected collectible on remote late grabbable\");\n            }\n            if (key == \"launchable\") {\n              entity.setAttribute(\"launchable\", \"\");\n              console.log(\"detected launchable on remote late grabbable\");\n            }\n          }\n        }\n        CS1.scene.appendChild(entity);\n      });\n      \n      CS1.socket.on(\"post-release\", grabbableName=>{\n        CS1.grabbables[grabbableName].components.grabbable.postRelease();\n      });\n      \n    }\n  }); //end system definition\n\n  AFRAME.registerComponent(\"grabbable\", {\n    schema: {\n      origin: { type: \"selector\" },\n      remote: { default: false }\n    },\n\n    init: function() {\n      var self = this;\n      self.cursor = false;\n      self.isDragging = false;\n      self.originEl = this.data.origin || this.el;\n      self.proxyObject = null;\n\n      self.el.classList.add(\"interactive\");\n\n      if (self.el.components.log) {\n        //this.el.components.log.data.channel = this.name;\n        self.el.setAttribute(\"log\", `channel:${String(self.name)}`);\n        if (!CS1.socket._callbacks[\"$vr-log\"])\n          CS1.socket.on(\"vr-log\", data => {\n            CS1.log(data.msg, String(data.channel));\n          });\n      }\n\n      this.name = Object.keys(CS1.grabbables).length;\n      CS1.grabbables[this.name] = self.el;\n\n      if (CS1 && CS1.game && CS1.game.hasBegun && !this.data.remote) {\n        console.log(\"Adding a local late grabbable.\");\n        const c = {};\n        c.color = self.el.getAttribute(\"color\");\n        const s = self.el.getAttribute(\"src\");\n        if (s) c.src = s;\n        const collectible = self.el.components.collectible;\n        if (collectible) {\n          c.collectible = collectible.data;\n          console.log(\"detected collectible on local late grabbable\");\n        }\n        const launchable = self.el.components.launchable;\n        if (launchable) {\n          c.launchable = true;\n          console.log(\"detected launchable on local late grabbable\");\n        }\n        onGameStart();\n        let d = {\n          name: self.name,\n          position: self.el.object3D.position,\n          scale: self.el.object3D.scale,\n          rotation: {\n            x: self.el.object3D.quaternion.x,\n            y: self.el.object3D.quaternion.y,\n            z: self.el.object3D.quaternion.z,\n            w: self.el.object3D.quaternion.w\n          },\n          soundState: self.el.soundState\n        };\n        CS1.socket.emit(\"add-grabbable-primitive\", {\n          type: self.el.nodeName,\n          data: d,\n          custom: c,\n          origin: CS1.socket.id\n        });\n      }\n\n      self.el.addEventListener(\"mousedown\", grab);\n      self.el.addEventListener(\"mouseup\", release);\n\n      function onGameStart() {\n        if (CS1.device == \"Mobile\") {\n          self.el.addEventListener(\"click\", function(e) {\n            grab(e);\n            setTimeout(function(e) {\n              document\n                .querySelector(\"#cam-cursor\")\n                .setAttribute(\"material\", \"color: yellow\");\n              release(e);\n              setTimeout(function(e) {\n                document\n                  .querySelector(\"#cam-cursor\")\n                  .setAttribute(\"material\", \"color: crimson\");\n              }, 500);\n            }, 5000);\n          });\n\n          self.el.addEventListener(\"mouseenter\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"green\" });\n          });\n          self.el.addEventListener(\"mouseleave\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"crimson\" });\n          });\n        } else if (CS1.device == \"Standard\") {\n          //No headset and not mobile\n\n          self.el.addEventListener(\"mouseenter\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"green\" });\n          });\n          self.el.addEventListener(\"mouseleave\", e => {\n            document\n              .querySelector(\"#cam-cursor\")\n              .setAttribute(\"material\", { color: \"crimson\" });\n          });\n        }\n        document.removeEventListener(\"gameStart\", onGameStart);\n      }\n\n      document.addEventListener(\"gameStart\", onGameStart);\n\n      function grab(e) {\n        e.cancelBubble = true;\n        if (self.isDragging) return;\n\n        self.isDragging = true;\n\n        self.cursor = e.detail.cursorEl;\n        if (self.cursor == self.el.sceneEl)\n          self.cursor = document.querySelector(\"[camera]\"); //This handles the scenario where the user isn't using motion controllers\n\n        // avoid seeing flickering at origin during reparenting\n        self.el.setAttribute(\"visible\", false);\n        setTimeout(function() {\n          self.el.setAttribute(\"visible\", true);\n        }, 20);\n\n        createProxyObject(self.cursor.object3D);\n\n        self.originEl.emit(\"grabStart\", e);\n        self.originEl.addState(\"moving\");\n      }\n\n      if (AFRAME.utils.device.checkHeadsetConnected()) {\n        self.el.addEventListener(\"mouseup\", release);\n      } else self.el.addEventListener(\"mouseup\", release);\n\n      function release(e) {\n        if (self.isDragging) {\n          //CS1.socket.emit('logall',{msg:`${CS1.myPlayer.name} releasing!` ,channel:self.name});\n          self.isDragging = false;\n\n          if (self.proxyObject) {\n            self.proxyObject.parent.remove(self.proxyObject);\n            self.proxyObject = null;\n          }\n\n          self.originEl.setAttribute(\n            \"position\",\n            self.originEl.getAttribute(\"position\")\n          ); //seems pointless, but will force the event system to notify subscribers\n          self.originEl.setAttribute(\n            \"rotation\",\n            self.originEl.getAttribute(\"rotation\")\n          ); //seems pointless, but will force the event system to notify subscribers\n\n          self.originEl.emit(\"grabEnd\", e);\n          self.originEl.removeState(\"moving\");\n          \n          if(self.postRelease){\n            self.postRelease();\n            CS1.socket.emit(\"post-release\", self.name);  \n          }\n          \n        }\n      }\n\n      function createProxyObject(cursorObject) {\n        self.proxyObject = new THREE.Object3D();\n        self.originEl.visible = false;\n        //handle object momentary flicker at world origin\n        setTimeout(function() {\n          self.originEl.visible = true;\n        }, 1000);\n        cursorObject.add(self.proxyObject);\n        copyTransform(self.originEl.object3D, self.proxyObject);\n      }\n    },\n\n    tick: function() {\n      var self = this;\n      if (self.proxyObject) {\n        copyTransform(self.proxyObject, self.originEl.object3D);\n        self.originEl.setAttribute(\n          \"position\",\n          self.originEl.getAttribute(\"position\")\n        ); //seems pointless, but will force the event system to notify subscribers\n        self.originEl.setAttribute(\n          \"rotation\",\n          self.originEl.getAttribute(\"rotation\")\n        ); //seems pointless, but will force the event system to notify subscribers\n      }\n    },\n\n    postRelease: false\n  });\n})();\n","export default (function navpointer(){\n\n  AFRAME.registerComponent('nav-pointer', {\n  init: function () {\n    const el = this.el;\n// On click, send the NPC to the target location.\n    el.addEventListener('click',e=>{\n      const ctrlEl = el.sceneEl.querySelector('[nav-agent]');\n      if(ctrlEl) ctrlEl.setAttribute('nav-agent', {\n        active: true,\n        destination: e.detail.intersection.point\n      });\n    });\n    el.addEventListener('mouseenter',e=>{\n      el.setAttribute('material', {color: 'green'});\n    });\n    el.addEventListener('mouseleave',e=>{\n      el.setAttribute('material', {color: 'crimson'})\n    });\n    \n    el.addEventListener('mousedown',e=>{\n      //console.log(e);\n    });\n \n    // Refresh the raycaster after models load.\n    el.sceneEl.addEventListener('object3dset',e=>{\n      this.el.components.raycaster.refreshObjects();\n    });\n  }\n});\n  \n})()","export default (function d3graph(){\n  \n  AFRAME.registerComponent('weather-viz', {\n    schema:{\n      side: {type:'string', default:'double'},\n      url: {type:'string', default:'https://api.openweathermap.org/data/2.5/forecast/?appid=56df5e300fabead0a56fc2d706e6aa7d&id=4959473'}\n    },\n    dependencies: ['geometry', 'material'],\n    init: function () {\n      this.el.setAttribute('width',6);\n      this.el.setAttribute('height',4);\n      this.canvas=document.createElement('canvas');\n      this.canvas.style.position = 'absolute';\n      this.canvas.style.left = -2000;\n      this.canvas.id=CS1.utils.uid();\n      this.canvas.setAttribute('crossOrigin','anonymous');\n      document.querySelector('a-scene').appendChild(this.canvas);\n      this.el.setAttribute('material',`shader:flat;src:#${this.canvas.id};side:${this.data.side}`);\n      \n      this.cursor = document.querySelector('#cam-cursor');\n\n      var ctx = this.ctx = this.canvas.getContext('2d');\n      ctx.fillStyle = 'rgb(0, 0, 0)';\n      ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);  \n      this.dataProcessed=false;\n      fetch(this.data.url)\n        .then(resp=>{return resp.json()})\n        .then(json=>{this.processData(json)})\n        .catch(err=>{console.log(err)})\n    },\n    processData: function(dataToProcess){\n        this.data = [];\n        dataToProcess.list.forEach(day=>{\n          //console.log(day.dt_txt , this.k2f(day.main.temp_max)+'F');\n          this.data.push({dt:day.dt_txt,temp_max:this.k2f(day.main.temp_max)});\n        });\n        this.dataProcessed=true;\n    },\n    k2f: function(k){\n      return Math.round((k - 273.15) * 9/5 + 32);\n    },\n    tick: function(t,dt){\n      if(!this.dataProcessed)return;\n      this.visualizeData(t);\n      this.updateCanvas(); \n    },\n    visualizeData: function(t){\n      let canvas = this.canvas;\n      let dt_width = canvas.width/this.data.length;\n      let ctx = this.ctx;\n      if(this.cursor.getAttribute('material').color=='green')t=1000;\n      this.data.forEach((d,i)=>{\n        let hue = t*(d.temp_max / 900);\n        ctx.fillStyle = 'hsl(' + hue + ', 50%, 30%)';\n        ctx.fillRect(i*dt_width, 0, dt_width, canvas.height);\n      });\n      \n      \n      \n    \n    },\n    drawRectangles: function(t){\n      var canvas = this.canvas;\n      var ctx = this.ctx;\n      var x;\n      var y;\n      var hue = t / 10;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 80%)';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n      hue = t / 15;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 60%)';\n      x = canvas.width / 10;\n      y = canvas.height / 10;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n      hue = t / 20;\n      ctx.fillStyle = 'hsl(' + hue + ', 50%, 40%)';\n      x = canvas.width / 5;\n      y = canvas.height / 5;\n      ctx.fillRect(x, y, canvas.width - x * 2, canvas.height - y * 2);\n    },\n    updateCanvas: function(){\n      var el = this.el;\n      var material;\n      material = el.getObject3D('mesh').material;\n        if (!material.map) {\n            return;\n      }\n      material.map.needsUpdate = true;   \n    }\n    \n  });\n  \n})()","var shaders = {};\nimport Polkadot_Shader from './shaders/Polkadot_Shader.json';\nshaders['Polkadot_Shader']=Polkadot_Shader;\nimport Sun_Shader from './shaders/Sun_Shader.json';\nshaders['Sun_Shader']=Sun_Shader;\nimport Jelly_Shader from './shaders/Jelly_Shader.json';\nshaders['Jelly_Shader']=Jelly_Shader;\nimport Green_Dance_Shader from './shaders/Green_Dance_Shader.json';\nshaders['Green_Dance_Shader']=Green_Dance_Shader;\nimport Cosmic_Shader from './shaders/Cosmic_Shader.json';\nshaders['Cosmic_Shader']=Cosmic_Shader;\nimport Cool_Tiles_Shader from './shaders/Cool_Tiles_Shader.json';\nshaders['Cool_Tiles_Shader']=Cool_Tiles_Shader;\nimport Disco_Shader from './shaders/Disco_Shader.json';\nshaders['Disco_Shader']=Disco_Shader;\nimport Marching_Ants_Shader from './shaders/Marching_Ants_Shader.json';\nshaders['Marching_Ants_Shader']=Marching_Ants_Shader;\nimport Goo_Shader from './shaders/Goo_Shader.json';\nshaders['Goo_Shader']=Goo_Shader;\nimport Psycho_Shader from './shaders/Psycho_Shader.json';\nshaders['Psycho_Shader']=Psycho_Shader;\nimport Ova_Shader from './shaders/Ova_Shader.json';\nshaders['Ova_Shader']=Ova_Shader;\nimport Thruster_Shader from './shaders/Thruster_Shader.json';\nshaders['Thruster_Shader']=Thruster_Shader;\nimport Flowing_Circles_Shader from './shaders/Flowing_Circles_Shader.json';\nshaders['Flowing_Circles_Shader']=Flowing_Circles_Shader;\nimport Electric_Shader from './shaders/Electric_Shader.json';\nshaders['Electric_Shader']=Electric_Shader;\nimport CS1_Shader from './shaders/CS1_Shader.json';\nshaders['CS1_Shader']=CS1_Shader;\n\nexport default CS1=>{\n  \nCS1.shaderfrog = shaders;\n\nvar defaultThreeUniforms = [\n    'normalMatrix', 'viewMatrix', 'projectionMatrix', 'position', 'normal',\n    'modelViewMatrix', 'uv', 'uv2', 'modelMatrix'\n];\n\nfunction ShaderRuntime() {}\n\nShaderRuntime.prototype = {\n\n    mainCamera: null,\n    cubeCameras: {},\n\n    reserved: { time: null, cameraPosition: null },\n\n    umap: {\n        float: { type: 'f', value: 0 },\n        int: { type: 'i', value: 0 },\n        vec2: { type: 'v2', value() { return new THREE.Vector2(); } },\n        vec3: { type: 'v3', value() { return new THREE.Vector3(); } },\n        vec4: { type: 'v4', value() { return new THREE.Vector4(); } },\n        samplerCube: { type: 't' },\n        sampler2D: { type: 't' }\n    },\n\n    getUmap( type ) {\n        let value = this.umap[ type ].value;\n        return typeof value === 'function' ? value() : value;\n    },\n\n    registerCamera( camera ) {\n\n        if( !( camera instanceof THREE.Camera ) ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.mainCamera = camera;\n\n    },\n\n    registerCubeCamera( name, camera ) {\n\n        if( !camera.renderTarget ) {\n            throw new Error( 'Cannot register a non-camera as a camera!' );\n        }\n\n        this.cubeCameras[ name ] = camera;\n\n    },\n\n    unregisterCamera( name ) {\n\n        if( name in this.cubeCameras ) {\n\n            delete this.cubeCameras[ name ];\n            \n        } else if( name === this.mainCamera ) {\n\n            delete this.mainCamera;\n\n        } else {\n\n            throw new Error( 'You never registered camera ' + name );\n\n        }\n\n    },\n\n    updateSource( identifier, config, findBy ) {\n\n        findBy = findBy || 'name';\n\n        if( !this.shaderTypes[ identifier ] ) {\n            throw new Error( 'Runtime Error: Cannot update shader ' + identifier + ' because it has not been added.' );\n        }\n\n        let newShaderData = this.add( identifier, config ),\n            shader, x;\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                extend( shader.material, omit( newShaderData, 'id' ) );\n                shader.material.needsUpdate = true;\n            }\n        }\n\n    },\n\n    renameShader( oldName, newName ) {\n\n        let x, shader;\n\n        if( !( oldName in this.shaderTypes ) ) {\n            throw new Error('Could not rename shader ' + oldName + ' to ' + newName + '. It does not exist.');\n        }\n\n        this.shaderTypes[ newName ] = this.shaderTypes[ oldName ];\n        delete this.shaderTypes[ oldName ];\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader.name === oldName ) {\n                shader.name = newName;\n            }\n        }\n\n    },\n\n    get( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n\n        if( !shaderType.initted ) {\n\n            this.create( identifier );\n        }\n\n        return shaderType.material;\n\n    },\n\n    add( shaderName, config ) {\n\n        let newData = clone( config ),\n            uniform;\n        newData.fragmentShader = config.fragment;\n        newData.vertexShader = config.vertex;\n        delete newData.fragment;\n        delete newData.vertex;\n\n        for( var uniformName in newData.uniforms ) {\n            uniform = newData.uniforms[ uniformName ];\n            if( uniform.value === null ) {\n                newData.uniforms[ uniformName ].value = this.getUmap( uniform.glslType );\n            }\n        }\n        \n        if( shaderName in this.shaderTypes ) {\n            // maybe not needed? too sleepy, need document\n            extend( this.shaderTypes[ shaderName ], newData );\n        } else {\n            this.shaderTypes[ shaderName ] = newData;\n        }\n\n        return newData;\n\n    },\n\n    create( identifier ) {\n\n        let shaderType = this.shaderTypes[ identifier ];\n      \n        delete shaderType.id;\n\n        shaderType.material = new THREE.RawShaderMaterial( shaderType );\n\n        this.runningShaders.push( shaderType );\n\n        shaderType.init && shaderType.init( shaderType.material );\n        shaderType.material.needsUpdate = true;\n\n        shaderType.initted = true;\n\n        return shaderType.material;\n\n    },\n\n    updateRuntime( identifier, data, findBy ) {\n\n        findBy = findBy || 'name';\n\n        let shader, x, uniformName, uniform;\n\n        // This loop does not appear to be a slowdown culprit\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n            if( shader[ findBy ] === identifier ) {\n                for( uniformName in data.uniforms ) {\n\n                    if( uniformName in this.reserved ) {\n                        continue;\n                    }\n\n                    if( uniformName in shader.material.uniforms ) {\n\n                        uniform = data.uniforms[ uniformName ];\n\n                        // this is nasty, since the shader serializes\n                        // CubeCamera model to string. Maybe not update it at\n                        // all?\n                        if( uniform.type === 't' && typeof uniform.value === 'string' ) {\n                            uniform.value = this.cubeCameras[ uniform.value ].renderTarget;\n                        }\n\n                        shader.material.uniforms[ uniformName ].value = data.uniforms[ uniformName ].value;\n                    }\n                }\n            }\n        }\n\n    },\n\n    // Update global shader uniform values\n    updateShaders( time, obj ) {\n\n        let shader, x;\n\n        obj = obj || {};\n\n        for( x = 0; shader = this.runningShaders[ x++ ]; ) {\n\n            for( let uniform in obj.uniforms ) {\n                if( uniform in shader.material.uniforms ) {\n                    shader.material.uniforms[ uniform ].value = obj.uniforms[ uniform ];\n                }\n            }\n\n            if( 'cameraPosition' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.cameraPosition.value = this.mainCamera.position.clone();\n\n            }\n\n            if( 'viewMatrix' in shader.material.uniforms && this.mainCamera ) {\n\n                shader.material.uniforms.viewMatrix.value = this.mainCamera.matrixWorldInverse;\n\n            }\n\n            if( 'time' in shader.material.uniforms ) {\n\n                shader.material.uniforms.time.value = time;\n\n            }\n\n        }\n\n    },\n\n    shaderTypes: shaders,\n\n    runningShaders: []\n\n};\n\n// Convenience methods so we don't have to include underscore\nfunction extend() {\n    let length = arguments.length,\n        obj = arguments[ 0 ];\n\n    if( length < 2 ) {\n        return obj;\n    }\n\n    for( let index = 1; index < length; index++ ) {\n        let source = arguments[ index ],\n            keys = Object.keys( source || {} ),\n            l = keys.length;\n        for( let i = 0; i < l; i++ ) {\n            let key = keys[i];\n            obj[ key ] = source[ key ];\n        }\n    }\n\n    return obj;\n}\n\nfunction clone( obj ) {\n    return extend( {}, obj );\n}\n\nfunction omit( obj, ...keys ) {\n    let cloned = clone( obj ), x, key;\n    for( x = 0; key = keys[ x++ ]; ) {\n        delete cloned[ key ];\n    }\n    return cloned;\n}\n  \nAFRAME.registerSystem('shader-frog', {\n  init:function(){\n    this.frog_runtime = new ShaderRuntime();\n    this.clock = new THREE.Clock();\n    var self = this;\n        \n    var scene = document.querySelector('a-scene');\n    if (scene.hasLoaded) {\n      registerCamera().bind(this);;\n    } else {\n      scene.addEventListener('loaded', registerCamera);\n    }\n    function registerCamera () {\n       var camera = document.querySelector(\"a-scene\").systems[\"camera\"];\n       if(camera && camera.sceneEl && camera.sceneEl.camera){\n         camera = camera.sceneEl.camera;\n         self.frog_runtime.registerCamera(camera);\n       }\n    }\n  },\n  tick: function (t) {\n    this.frog_runtime.updateShaders( this.clock.getElapsedTime() );\n  }\n});\nAFRAME.registerComponent('shader-frog',{\n  schema:{\n    name:{type:\"string\"}\n  },\n  init: function(){\n    this.originalMaterial = this.el.getObject3D('mesh').material;\n    this.shaderData = shaders[this.data.name];\n  },\n  update: function(){\n    this.system.frog_runtime.add(this.data.name,this.shaderData);\n    var material = this.system.frog_runtime.get(this.data.name);\n    this.el.getObject3D('mesh').material = material;\n  },\n  remove: function(){\n    this.el.getObject3D('mesh').material = this.originalMaterial;\n  }\n});\n  \n}\n","\nconst defaults={\n  labelText: 'Label Text',\n  suffix: '',\n  labelColor: '#e23fcf',\n  gradientColor1: '#78F8EC',\n  gradientColor2: '#6E4AE2',\n  max: 100\n}\n\nconst RingDial = function(custom) {\n    this.opts = Object.assign({}, defaults, custom);\n    this.size = 2000/9;\n    this.strokeWidth = this.size / 8;\n    this.radius = (this.size / 2) - (this.strokeWidth / 2);\n    this.value = 0;\n    this.cachedValue = this.value;\n    this.targetValue = false;\n    this.isAnimating = false;\n    this.direction = 'up';\n    this.svg;\n    this.defs;\n    this.slice;\n    this.overlay;\n    this.text;\n    this.label;\n    this.arrow;\n    this.create(this.opts.labelColor,this.opts.gradientColor1,this.opts.gradientColor2);\n}\n\nRingDial.prototype.create = function(labelColor,gradientColor1,gradientColor2) {\n    this.createSvg();\n    this.createDefs(gradientColor1,gradientColor2);\n    this.createSlice();\n    this.createOverlay();\n    this.createText(gradientColor2);\n    //this.createArrow();\n    this.createLabel(labelColor);\n    this.opts.container.appendChild(this.svg);\n};\n\nRingDial.prototype.createSvg = function() {\n    var svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    svg.setAttribute('width', this.size + 'px');\n    svg.setAttribute('height', this.size + 'px');\n    this.svg = svg;\n};\n\nRingDial.prototype.createDefs = function(gc1,gc2) {\n    var defs = document.createElementNS(\"http://www.w3.org/2000/svg\", \"defs\");\n    var linearGradient = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradient.setAttribute('id', 'gradient'+this.opts.labelText);\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', gc2);\n    stop1.setAttribute('offset', '0%');\n    linearGradient.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', gc1);\n    stop2.setAttribute('offset', '100%');\n    linearGradient.appendChild(stop2);\n    var linearGradientBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"linearGradient\");\n    linearGradientBackground.setAttribute('id', 'gradient-background');\n    var stop1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop1.setAttribute('stop-color', 'rgba(0, 0, 0, 0.2)');\n    stop1.setAttribute('offset', '0%');\n    linearGradientBackground.appendChild(stop1);\n    var stop2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"stop\");\n    stop2.setAttribute('stop-color', 'rgba(0, 0, 0, 0.05)');\n    stop2.setAttribute('offset', '100%');\n    linearGradientBackground.appendChild(stop2);\n    defs.appendChild(linearGradient);\n    defs.appendChild(linearGradientBackground);\n    this.svg.appendChild(defs);\n    this.defs = defs;\n};\n\nRingDial.prototype.createSlice = function() {\n    var slice = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    slice.setAttribute('fill', 'none');\n    slice.setAttribute('stroke', `url(#gradient${this.opts.labelText})`);\n    slice.setAttribute('stroke-width', this.strokeWidth);\n    slice.setAttribute('transform', 'translate(' + this.strokeWidth / 2 + ',' + this.strokeWidth / 2 + ')');\n    slice.setAttribute('class', 'animate-draw');\n    this.svg.appendChild(slice);\n    this.slice = slice;\n};\n\nRingDial.prototype.createOverlay = function() {\n    var r = this.size - (this.size / 2) - this.strokeWidth / 2;\n    var circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n    circle.setAttribute('cx', this.size / 2);\n    circle.setAttribute('cy', this.size / 2);\n    circle.setAttribute('r', r);\n    if(navigator.vendor.includes('Apple')){\n      circle.setAttribute('fill', 'rgba(0, 0, 0, 0.05)');\n    }else\n       circle.setAttribute('fill', 'url(#gradient-background)');\n    this.svg.appendChild(circle);\n    this.overlay = circle;\n};\n\nRingDial.prototype.createText = function(c) {\n    var fontSize = this.size / 3.5;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', (this.size / 2) + fontSize / 7.5);\n    text.setAttribute('y', (this.size / 2) + fontSize / 4);\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = 0 + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.opts.suffix}</tspan>`;\n    this.svg.appendChild(text);\n    this.text = text;\n};\n\nRingDial.prototype.createLabel = function(c) {\n    let n=4.5;\n    if(this.opts.labelText.length>8)n=7\n    var fontSize = this.size / n;\n    var text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n    text.setAttribute('x', this.size / 2);\n    text.setAttribute('y', (2*this.size / 3) + fontSize / (n-1));\n    text.setAttribute('font-family', 'Century Gothic, Lato');\n    text.setAttribute('font-size', fontSize);\n    text.setAttribute('fill', c);\n    text.setAttribute('text-anchor', 'middle');\n    var tspanSize = fontSize / 3;\n    text.innerHTML = this.opts.labelText;\n    this.svg.appendChild(text);\n    this.label = text;\n};\n\nRingDial.prototype.createArrow = function() {\n    var arrowSize = this.size / 10;\n    var arrowYOffset, m;\n    if(this.direction === 'up') {\n        arrowYOffset = arrowSize / 2;\n        m = -1;\n    }\n    else if(this.direction === 'down') {\n        arrowYOffset = 0;\n        m = 1;\n    }\n    var arrowPosX = ((this.size / 2) - arrowSize / 2);\n    var arrowPosY = (this.size - this.size / 3) + arrowYOffset;\n    var arrowDOffset =  m * (arrowSize / 1.5);\n    var arrow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n    arrow.setAttribute('d', 'M 0 0 ' + arrowSize + ' 0 ' + arrowSize / 2 + ' ' + arrowDOffset + ' 0 0 Z');\n    arrow.setAttribute('fill', '#97F8F0');\n    arrow.setAttribute('opacity', '0.6');\n    arrow.setAttribute('transform', 'translate(' + arrowPosX + ',' + arrowPosY + ')');\n    this.svg.appendChild(arrow);\n    this.arrow = arrow;\n};\n\nRingDial.prototype.animateStart = function() {\n    var v = 0;\n    var self = this;\n    var intervalOne = setInterval(function() {\n        var p = +(v / self.value).toFixed(2);\n        var a = (p < 0.95) ? 2 - (2 * p) : 0.05;\n        v += a;\n        // Stop\n        if(v >= +self.value) {\n            v = self.value;\n            clearInterval(intervalOne);\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.animateTo = function(to,s=3,t=0.1) {\n    let m=this.opts.max;\n    s*=m/100;\n    t*=m/100;\n    if(to>m)to=m;\n    if(to<0)to=0;\n    var v = this.value;\n    var self = this;\n    this.isAnimating = true;\n    var intervalOne = setInterval(function() {\n        var p =  (v>to)? +(to /v).toFixed(2)  : +(v / to).toFixed(2);\n        var a = (p < 0.95) ? s - (s * p) : t;\n        if(to<v){\n          v -= a;\n            // Stop\n            if(v <= -to) {\n                self.value = to;\n                clearInterval(intervalOne);\n                self.cachedValue = self.value;\n                self.isAnimating = false;\n            }\n        }else {\n           v += a;\n            // Stop\n            if(v >= +to) {\n                self.value = to;\n                if(to>=self.opts.max){\n                  self.svg.currentScale=0\n                  setTimeout(e=>{\n                    self.setValue(self.opts.max);\n                    self.svg.currentScale=1;\n                  },100);\n                }\n                clearInterval(intervalOne);\n                self.cachedValue = self.value;\n                self.isAnimating = false;\n            }\n        }\n        self.setValue(v);\n    }, 10);\n};\n\nRingDial.prototype.changeBy = function(amt) {\n   this.targetValue = this.targetValue?this.targetValue+amt:this.value+amt;\n   this.animateTo(this.targetValue);\n};\n\nRingDial.prototype.animateReset = function() {\n    this.setValue(0);\n};\n\nRingDial.prototype.polarToCartesian = function(centerX, centerY, radius, angleInDegrees) {\n  var angleInRadians = (angleInDegrees-90) * Math.PI / 180.0;\n  return {\n    x: centerX + (radius * Math.cos(angleInRadians)),\n    y: centerY + (radius * Math.sin(angleInRadians))\n  };\n}\n\nRingDial.prototype.describeArc = function(x, y, radius, startAngle, endAngle){\n    var start = this.polarToCartesian(x, y, radius, endAngle);\n    var end = this.polarToCartesian(x, y, radius, startAngle);\n    var largeArcFlag = endAngle - startAngle <= 180 ? \"0\" : \"1\";\n    var d = [\n        \"M\", start.x, start.y, \n        \"A\", radius, radius, 0, largeArcFlag, 0, end.x, end.y\n    ].join(\" \");\n    return d;       \n}\n\nRingDial.prototype.setValue = function(value) {\t\n\t\tvar c = (value / this.opts.max) * 360;\n\t\tif(c === 360)\n\t\t\tc = 359.99;\n\t\tvar xy = this.size / 2 - this.strokeWidth / 2;\n\t\tvar d = this.describeArc(xy, xy, xy, 180, 180 + c);\n    this.slice.setAttribute('d', d);\n    var tspanSize = (this.size / 3.5) / 3;\n    this.text.innerHTML = Math.floor(value) + `<tspan font-size=${tspanSize} dy=${-tspanSize * 1.2}>${this.opts.suffix}</tspan>`;\n    this.value = value;\n};\n\nexport default RingDial;","export default class Meter{\n\n  constructor(container,labelText='label',color='white',value=0,min=0,max=1,low=0.25,high=0.75,optimum=0.8){\n    this.widget = document.createElement('div');\n    this.widget.style.fontSize = 2000/9/4.5 + 'px';\n    this.widget.style.marginTop = 2000/81 + 'px';\n    this.widget.style.marginBottom = 2000/81 + 'px';\n    this.widget.style.color = color;\n    this.value = 0;\n    this.min = parseFloat(min);\n    this.max = parseFloat(max);\n    this.range = max-min;\n    this.el = document.createElement('meter');\n    this.el.cachedValue = this.value;\n    this.el.targetValue = false;\n    this.el.isAnimating = false;\n    this.el.setAttribute('value',value);\n    this.el.setAttribute('min',min);\n    this.el.setAttribute('max',max);\n    this.el.setAttribute('low',low);\n    this.el.setAttribute('high',high);\n    this.el.setAttribute('optimum',optimum);\n    this.el.style.width = 1250/8 + 'px';\n    this.el.style.height = 1250/32 + 'px';\n    this.widget.appendChild(this.el);\n    this.label = document.createElement('div');\n    this.label.style.textAlign = 'center';\n    this.label.innerHTML = labelText;\n    this.widget.appendChild(this.label);\n    container.appendChild(this.widget);\n  }\n  \n  animateTo(to) {\n      var v = parseFloat(this.el.getAttribute('value'));\n      var self = this.el;\n      self.range = this.range;\n      self.isAnimating = true;\n      var intervalOne = setInterval(function() {\n          var p =  (v>to)? +(to /v).toFixed(4)  : +(v / to).toFixed(4);\n          var a = (p < 0.95) ? self.range/30 - (self.range/30 * p) : 0.003;\n          if(to<v){\n            \n            v -= a;\n              // Stop\n              if(v <= -to) {\n                  self.value = to\n                  if(to<=0)self.setValue(0);\n                  clearInterval(intervalOne);\n                  self.cachedValue = self.value;\n                  self.isAnimating = false;\n              }\n          }else {\n             v += a;\n              // Stop\n              if(v >= +to) {\n                  self.value = to;\n                  if(to>=100)self.setValue(100);\n                  clearInterval(intervalOne);\n                  self.cachedValue = self.value;\n                  self.isAnimating = false;\n              }\n          }\n          self.value = v;\n          this.value = v;\n      }, 10);\n  };\n  \n  changeBy(amt) {\n     this.el.targetValue = this.el.targetValue?this.el.targetValue+amt:this.el.cachedValue+amt;\n     this.animateTo(this.el.targetValue);\n  }\n  \n\n\n}","import config from '../../../.data/client-config.json';\nexport default(()=>{\nwindow.onload = e=>{\n  let loginHTML = `\n<div class=\"modal fade\" id=\"login-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\" style=\"display: block;background-color:${config.theme.overlayColor}\">\n    <div class=\"modal-dialog\">\n\t\t  <div class=\"loginmodal-container\" style=\"background-color:${config.theme.formColor}\">\n          <image id=\"logo\" src=${config.theme.logo} width=\"64px\">\n          <h3 id=\"gamename\" style=\"color:${config.theme.titleFontColor}\">${config.gameName}</h3>\n\t\t\t<div>\t  \n\t\t\t\t\t<input  placeholder=\"username\" class=\"q1\">\n          <input  placeholder=\"password\" type=\"password\" class=\"q2\"> \n          <button id=\"lb\" style=\"background-color:${config.theme.formButtonColor}\">Submit</button> \n          <div style=\"color:${config.theme.formButtonColor}\" id=\"login-msg\"></div> \n      </div>\t\t\t\t\n\n\t\t\t</div>\n\t</div>\n</div>\n`\n let loginContainer = document.querySelector('#login');\n loginContainer.innerHTML = loginHTML;\n setTimeout(e=>{\n   document.querySelector('.q1').focus(); \n   if(!(CS1 && CS1.socket.connected)){\n     document.getElementById('login-msg').innerHTML = 'OFFLINE MODE';\n      document.querySelector('#lb').setAttribute('value','Play Game Offline');\n   }\n },1000);\n document.getElementById('lb').addEventListener(\"click\",login);\n document.querySelector('.q2').addEventListener(\"keydown\",e=>{\n   if(e.code=='Enter')login(e);\n }); \n  \n  function login(e){\n    e.preventDefault(); \n    if(!(CS1 && CS1.socket.connected)){\n      loginContainer.style.zIndex = -1;\n      loginContainer.setAttribute('hidden','');\n      CS1.myPlayer.components[\"movement-controls\"].data.speed=CS1.myPlayer.startSpeed;\n      CS1.sounds.playerJoined.play();\n      setTimeout(()=>{CS1.say(CS1.game.announcements.welcome)},CS1.game.welcomeDelay);    \n    }\n    else if(document.querySelector('.q1').value.length > 0 && document.querySelector('.q2').value.length > 0){\n     if(navigator.vendor.includes('Apple')){\n        CS1.sounds.playerJoined.play()\n         .catch(err=>{console.log(err)});\n      } \n     CS1.login(document.querySelector('.q1').value,document.querySelector('.q2').value);\n      document.querySelector('.q1').value = '';\n      document.querySelector('.q2').value = '';\n    }\n  }\n  \n}\n  \n})()\n","export default (function cloud(){\n  \n  \nAFRAME.registerComponent('cloud', {\n  schema:{\n   color: {type:'string',default:'blue'}\n  },\n  init: function () {\n    const el = this.el;\n    el.setAttribute('material', 'shader','cloud-shader');\n    el.setAttribute('material', 'myColor', this.data.color);\n  },\n  update: function () {\n    this.el.setAttribute('material', 'myColor', this.data.color);\n  }\n});\n\n// from https://github.com/hughsk/glsl-noise/blob/master/periodic/3d.glsl\nconst pnoise3 = `\n\n//\n// GLSL textureless classic 3D noise \"cnoise\",\n// with an RSL-style periodic variant \"pnoise\".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise3(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n`;\n\nAFRAME.registerShader('cloud-shader', {\n  schema: {\n    timeMsec: {type:'time', is:'uniform'},\n    myOffset: {type:'vec3', is:'uniform'},\n    myColor: {type:'color', is:'uniform', default:'pink'}\n  },\n  vertexShader: pnoise3 + `\n\n//\n// Based on @thespite's article:\n// \n// \"Vertex displacement with a noise function using GLSL and three.js\"\n// Source: https://www.clicktorelease.com/blog/vertex-displacement-noise-3d-webgl-glsl-three-js/\n//\n\nvarying float noise;\nuniform float timeMsec; // A-Frame time in milliseconds.\nuniform vec3 myOffset;\n\nfloat turbulence( vec3 p ) {\n\n  float w = 100.0;\n  float t = -.5;\n\n  for (float f = 1.0 ; f <= 10.0 ; f++ ){\n    float power = pow( 2.0, f );\n    t += abs( pnoise3( vec3( power * p ), vec3( 10.0, 10.0, 10.0 ) ) / power );\n  }\n\n  return t;\n\n}\n\nvoid main() {\n  float time = timeMsec / 1000.0; // Convert from A-Frame milliseconds to typical time in seconds.\n  noise = 10.0 *  -.10 * turbulence( .5 * normal + time / 3.0 );\n  float b = 5.0 * pnoise3( 0.05 * position, vec3( 100.0 ) );\n  float displacement = (- 10. * noise + b) / 50.0;\n\n  vec3 newPosition = position + normal * displacement + myOffset;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n}\n\n`,\n  fragmentShader: `\n\nvarying float noise;\nuniform vec3 myColor;\n\nvoid main() {\n\n  vec3 color = myColor  - vec3(2. * noise);\n  gl_FragColor = vec4( color.rgb , 1.0 );\n\n}\n\n`\n});\n\n  \n  \n  \n  \n  \n  \n  \n  \n})()","export default (function dotrow(){\n   \nAFRAME.registerComponent('dotrow', {\n  schema:{\n   change: {type:'string',default:'x'},\n   to: {type:'number',default:10}\n  },\n  init: function () {\n    \n    let changeDimension = this.data.change;\n    let to = this.data.to;\n    let elPosition = this.el.getAttribute('position');\n    let from = elPosition[changeDimension];\n    let yPosition = 1;\n    let delta = (to>from)?2:-2;\n    let cdIsX = (changeDimension=='x');\n    \n    //console.log(`preparing to add dots from ${from} to ${to} in the ${changeDimension} dimension with a delta of ${delta}.`);\n    \n    this.dots = [];\n\n    let scn = document.querySelector('a-scene');\n    \n    for(let i = from;i*(delta/2) < to*(delta/2); i += delta){\n      //console.log('adding dot...');\n      let c = document.createElement('a-sphere');\n      c.setAttribute('position',(cdIsX)?`${i} 1 ${elPosition.z}`:`${elPosition.x} 1 ${i}`);\n      c.setAttribute('shader-frog', 'name:Ova_Shader');\n      c.setAttribute('radius', '0.5');\n      c.setAttribute('collectible','affects:pointsDial;value:10;threshold:1.6')  \n      scn.appendChild(c);\n      this.dots.push(c);\n      \n    }\n    \n    this.firstInitTime = Date.now();\n    \n  },\n  update: function(){\n\n     if((Date.now()-this.firstInitTime)<5000)return;\n     console.log('updating dotrow...');\n     \n     this.dots.forEach(\n       d=>{\n         d.parentNode.removeChild(d);\n       }\n     );\n     this.init();\n  \n  }\n  \n});\n\n})()","export default(()=>{\n\nAFRAME.registerSystem('log', {\n\t  schema: {\n\t    console: {default: true}\n\t  },\n\n\t  init: function () {\n\t    var data = this.data;\n\t    var logs = this.logs = [];\n\t    var loggers = this.loggers = [];\n\n\t    // Register global function for logging.\n\t    window.CS1.log = function (message, channel) {\n\t      logs.push([message, channel]);\n\t      loggers.forEach(function (loggerComponent) {\n\t        loggerComponent.receiveLog(message, channel);\n\t      });\n\n\t      if (data.console) {\n\t        console.log('[log:' + (channel || '') + '] ' + message);\n\t      }\n\t    };\n      \n      window.CS1.socket.on('vr-log',data=>{\n        window.CS1.log(data.msg,data.channel);\n      });\n      \n      window.CS1.logall = function (message, channel){\n        window.CS1.socket.emit('logall',{msg:message,channel:channel});    \n      }\n      \n      \n\t  },\n\n\t  registerLogger: function (component) {\n\t    this.loggers.push(component);\n\t    this.logs.forEach(function (log) {\n\t      component.receiveLog.apply(component, log);\n\t    });\n\t  },\n\n\t  unregisterLogger: function (component) {\n\t    this.loggers.splice(this.loggers.indexOf(component), 1);\n\t  }\n\t});\n\n\t/**\n\t * In-VR logging using text component.\n\t */\n\tAFRAME.registerComponent('log', {\n\t  schema: {\n\t    channel: {type: 'string'},\n\t    filter: {type: 'string'},\n\t    max: {default: 100},\n\t    showErrors: {default: true}\n\t  },\n\n\t  init: function () {\n\t    this.logs = [];\n\t    this.system.registerLogger(this);\n\t  },\n\n\t  play: function () {\n\t    var self = this;\n\n\t    // Listen for `<a-scene>.emit('log')`.\n\t    this.el.sceneEl.addEventListener('log', function (evt) {\n\t      if (!evt.detail) { return; }\n\t      self.receiveLog(evt.detail.message, evt.detail.channel);\n\t    });\n\n\t    window.onerror = function (errorMsg, url, lineNumber, column, errorObj) {\n\t      self.receiveLog('Error: ' + errorMsg);\n\t    }\n\t  },\n\n\t  receiveLog: function (message, channel) {\n\t    var data = this.data;\n\n\t    // Coerce to string.\n\t    if (typeof message !== 'string') {\n\t      message = JSON.stringify(message);\n\t    }\n\n\t    // Match with ID if defined in data or event detail.\n\t    if (data.channel && channel && data.channel !== channel) { return; }\n\n\t    // Apply filter if `filter` defined.\n\t    if (data.filter && message.indexOf(data.filter) === -1) { return; }\n\n\t    // Add log.\n\t    this.logs.push(message);\n\n\t    // Truncate logs if `max` defined.\n\t    if (data.max && this.logs.length > data.max) { this.logs.shift(); }\n\n\t    // Update text. Each log gets its own line.\n\t    this.el.setAttribute('text', {value: this.logs.join('\\n')});\n      \n\t  },\n\n\t  remove: function () {\n\t    this.el.removeAttribute('text');\n\t    this.system.unregisterLogger(this);\n\t  }\n\t});\n  \n})()","export default (()=>{\n  \n  AFRAME.registerSystem('launchable', {\n  schema: {},  // System schema. Parses into `this.data`.\n\n  init: function () {\n\n    CS1.socket.on('launch-sound',name=>{\n      if(CS1.grabbables[name] && CS1.grabbables[name].components.sound__launch)\n        CS1.grabbables[name].components.sound__launch.playSound();\n    });\n    \n    CS1.socket.on('launch-complete',name=>{\n      CS1.grabbables[name].components.grabbable.isDragging = false;\n    });\n    \n  },\n\n  \n});\n  \n  AFRAME.registerComponent('launchable', {\n    schema:{\n      burst:{type:'boolean',default:true},\n      launchSound:{type:'string',default:'https://cdn.glitch.com/83b7f985-f6ce-40dd-ac98-772aff98ebbf%2Fwoosh.mp3'}\n    },\n    // will listen for the grabbable release event \n    dependencies: ['grabbable'],\n    \n    init: function () {\n      \n      this.name = this.el.components.grabbable.name;\n      console.log(`Launchable added with name: ${this.name}.`);\n      \n      let self = this;\n      \n      this.grabbable = self.el.components.grabbable;\n      \n      self.el.setAttribute('sound__launch',`src:url(${this.data.launchSound})`);\n      \n      self.el.addEventListener('grabEnd',e=>{\n        self.launch();\n      });\n      \n      \n      \n      \n         \n    },\n    \n    getDir: function(){\n     if(CS1.device == 'Oculus Quest'){\n       let d = this.grabbable.cursor.components.raycaster.raycaster.ray.direction;\n       d.x *= -1;\n       d.y *= -1;\n       d.z *= -1;\n       return d;\n     }else{\n       return this.grabbable.cursor.object3D.getWorldDirection(); \n     }\n     \n    },\n    \n    launch: function(dir){\n      CS1.socket.emit('logall',{msg:`${CS1.myPlayer.name} launched grabbable ${this.el.components.grabbable.name}!`,channel:'0'});\n      this.el.components.grabbable.isDragging = true; // can't grab while it is in launch\n      const launchData = {name:this.name,dir:(dir)?dir:this.getDir()};\n      CS1.socket.emit('launch',launchData);\n    }\n    \n    \n  });\n\n})()","export default (function launchrow(){\n   \nAFRAME.registerComponent('launchrow', {\n  schema:{\n   change: {type:'string',default:'x'},\n   to: {type:'number',default:10}\n  },\n  init: function () {\n    \n    let changeDimension = this.data.change;\n    let to = this.data.to;\n    let elPosition = this.el.getAttribute('position');\n    let from = elPosition[changeDimension];\n    let yPosition = 1;\n    let delta = (to>from)?4:-4;\n    let cdIsX = (changeDimension=='x');\n    \n    //console.log(`preparing to add dots from ${from} to ${to} in the ${changeDimension} dimension with a delta of ${delta}.`);\n    \n    this.dots = [];\n\n    let scn = document.querySelector('a-scene');\n    \n    for(let i = from;i*(delta/2) < to*(delta/2); i += delta){\n      //console.log('adding dot...');\n      let c = document.createElement('a-sphere');\n      c.setAttribute('position',(cdIsX)?`${i} 1.4 ${elPosition.z}`:`${elPosition.x} 1.4 ${i}`);\n      c.setAttribute('shader-frog', 'name:Disco_Shader');\n      c.setAttribute('radius', '1');\n      c.setAttribute('collectible','affects:energyDial;value:-10;threshold:1.6');\n      c.setAttribute('grabbable','');\n      c.setAttribute('launchable','');  \n      scn.appendChild(c);\n      this.dots.push(c);\n      \n    }\n    \n    this.firstInitTime = Date.now();\n    \n  },\n  update: function(){\n\n     if((Date.now()-this.firstInitTime)<5000)return;\n     console.log('updating dotrow...');\n     \n     this.dots.forEach(\n       d=>{\n         d.parentNode.removeChild(d);\n       }\n     );\n     this.init();\n  \n  }\n  \n});\n\n})()","import config from '../../../../.data/client-config.json';\nimport page1 from './page1.html';\nimport page2 from './page2.html';\nimport page3 from './page3.html';\nimport page4 from './page4.html';\n\nexport const controls = {\n  \n init: function(){ \n    \n const m1 = document.querySelector('#menu1');\n const m = document.querySelector('#main');\n const m2 = document.querySelector('#menu2');\n CS1.ui = {};\n CS1.ui.controls = {}; \n   \n // Beginner Edits Should Start Here\n   \n const box = document.createElement('a-box');\n box.setAttribute('scale','0.7 0.7 0.7');\n box.object3D.visible = true;\n box.object3D.position.set(0,2.3,-0.25);\n box.setAttribute('material','src:#chip');\n m2.appendChild(box);\n   \n CS1.ui.controls.showBox = e => {\n   \n  box.object3D.visible = (box.object3D.visible)?false:true;\n   \n }\n \n CS1.ui.controls.resetShips = e => {\n   const ship = document.querySelector('#max-delta');\n   const ship2 = document.querySelector('#max-delta2');\n   const ship3 = document.querySelector('#max-delta3');\n   if(ship){\n    ship.components.alongpath.reset();\n    ship2.components.alongpath.reset();\n    ship3.components.alongpath.reset();\n   }\n }\n \n  CS1.ui.controls.addBlasterBall = e => {\n   const sphere = document.createElement('a-sphere');\n   sphere.setAttribute('color','brown');\n   sphere.setAttribute('collectible','affects:energyDial ; value: -10'); \n   sphere.setAttribute('launchable','');\n   sphere.classList = 'blasterball';\n   const pp = CS1.myPlayer.object3D.position;\n   sphere.object3D.position.set(pp.x,pp.y+4,pp.z);\n   CS1.scene.appendChild(sphere);\n }\n \n \n    \n // All Beginner Edits Should Be Above Here\n\n function runOnce(){\n      m1.setAttribute('sound','src:url(https://cdn.glitch.com/36918312-2de3-4283-951d-240b263949f7%2Fclick.mp3?v=1561929149589)');\n      m2.setAttribute('sound','src:url(https://cdn.glitch.com/36918312-2de3-4283-951d-240b263949f7%2Fclick.mp3?v=1561929149589)');\n      document.removeEventListener('click',runOnce);\n    }\n\n\n    document.addEventListener('click',runOnce);\n    \n\n    let m2b1 = document.querySelector('#menu2-b1');\n    if(m2b1)m2b1.addEventListener('mouseenter',e=>{\n  \n      if(CS1.stats.container.getAttribute('visible')&&m2.components.sound)m2.components.sound.playSound()\n\n    });\n    if(m2b1)m2b1.addEventListener('click',e=>{\n      e.preventDefault();\n      box.setAttribute('material','src:#chip');\n      CS1.socket.playerData.faceIndex = 1;\n      CS1.myPlayer._avatarType = config.avatar.models[CS1.socket.playerData.faceIndex].type;\n    });\n\n    let m2b2 = document.querySelector('#menu2-b2');\n    if(m2b2)m2b2.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m2.components.sound)m2.components.sound.playSound()\n\n    });\n    if(m2b2)m2b2.addEventListener('click',e=>{\n      e.preventDefault();\n      box.setAttribute('material','src:#mel');\n      CS1.socket.playerData.faceIndex = 2;\n      CS1.myPlayer._avatarType = config.avatar.models[CS1.socket.playerData.faceIndex].type;\n    });\n\n    let m2b3 = document.querySelector('#menu2-b3');\n    if(m2b3)m2b3.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m2.components.sound)m2.components.sound.playSound()\n\n    });\n    if(m2b3)m2b3.addEventListener('click',e=>{\n      e.preventDefault();\n      box.setAttribute('material','src:#vr1');\n      CS1.socket.playerData.faceIndex = 0;\n      CS1.myPlayer._avatarType = config.avatar.models[CS1.socket.playerData.faceIndex].type;\n    });\n\n\n    let m1b1 = document.querySelector('#menu1-b1');\n    if(m1b1)m1b1.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m1.components.sound)m1.components.sound.playSound()\n\n    });\n    m1b1.onclick = e=>{\n      CS1.__display__stats();\n    }\n\n    let m1b2 = document.querySelector('#menu1-b2');\n    if(m1b2)m1b2.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m1.components.sound)m1.components.sound.playSound()\n\n    });\n    m1b2.onclick = e=>{\n      m.innerHTML = page2;\n    }\n\n    let m1b3 = document.querySelector('#menu1-b3');\n    if(m1b3)m1b3.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m1.components.sound)m1.components.sound.playSound()\n\n    });\n    m1b3.onclick = e=>{\n      m.innerHTML = page3;\n    }\n\n    let m1b4 = document.querySelector('#menu1-b4');\n    if(m1b4)m1b4.addEventListener('mouseenter',e=>{\n\n      if(CS1.stats.container.getAttribute('visible')&&m1.components.sound)m1.components.sound.playSound()\n\n    });\n    m1b4.onclick = e=>{\n      m.innerHTML = page4;\n    }\n    \n\n },\n  \n  }","\nimport styles from './styles.html';\nimport panels from './panels.html';\nimport {controls} from './controls';\n\nexport default(()=>{\n\nAFRAME.registerSystem('vrui', {\n  schema: {\n\t  panels: {default: 3}\n  },\n  \n  dependencies: ['htmlembed'],\n  \n  init: ()=>{\n     \n    \n    \n    document.head.innerHTML += styles;\n    \n    const ec = document.createElement('a-entity');\n    ec.setAttribute('style','visibility:hidden');\n    ec.setAttribute('vrui','');\n    ec.id = 'embed-container';\n    ec.innerHTML = panels;\n    let scn = document.querySelector('a-scene');\n    scn.appendChild(ec);\n        \n    \n    document.addEventListener('gameStart',e=>{\n      \n      const w = document.createElement('div');\n      w.style.width = '100%';\n      w.style.height = '100%';\n      w.appendChild(CS1.stats.container);\n     \n      \n    CS1.__display__stats = function(){\n      const c = document.querySelector('#main');\n      c.innerHTML='';\n      c.appendChild(w); \n    }\n    \n    \n   document.querySelector('#main').appendChild(w);  \n      \n    let scn = document.querySelector('a-scene');\n    let ctr = document.querySelector('#embed-container');\n    ctr.setAttribute('visible',false);\n    ctr.setAttribute('position','0 0.3 0');\n    CS1.myPlayer.add(ctr);\n    CS1.stats.container = ctr;\n    let m = document.querySelector('#main');\n    let m1 = document.querySelector('#menu1');\n    let m2 = document.querySelector('#menu2');\n    m.setAttribute('htmlembed','');\n    m1.setAttribute('htmlembed','');\n    m2.setAttribute('htmlembed','');\n\n\n   controls.init();\n      \n      \n    document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })  \n      \n    \n    let lh = CS1.myPlayer.components.player.lh.components[\"oculus-touch-controls\"];\n    let rh = CS1.myPlayer.components.player.rh.components[\"oculus-touch-controls\"];\n    if(CS1.device==\"Oculus Quest\"){\n       //AFRAME.utils.device.checkHeadsetConnected()\n      \n        let cursor = document.querySelector('a-cursor');\n        cursor.pause();\n        if(CS1.cam.components.raycaster)CS1.cam.components.raycaster.pause();\n          lh.el.addEventListener('abuttondown',e=>{\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v);\n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          });\n          rh.el.addEventListener('abuttondown',e=>{\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v); \n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          });   \n    } else if(CS1.device==\"Standard\") {\n      \n      document.addEventListener('keypress',e=>{\n          if(e.code=='Backquote'){\n            CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = CS1.stats.container.getAttribute('visible');\n            CS1.stats.container.setAttribute('visible',!v);\n            if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n          }\n        });       \n          \n    } else if(CS1.device==\"Mobile\"){\n      \n      \n      document.addEventListener('doubleTapMenu',e=>{\n        CS1.stats.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n        let v = CS1.stats.container.getAttribute('visible');\n        CS1.stats.container.setAttribute('visible',!v);\n        if(v){\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.remove('screen')\n              })\n            }else{\n              document.querySelectorAll('.dark').forEach(e=>{\n               e.classList.add('screen')\n              })\n            }\n        \n      });\n      \n      \n    }  \n      \n      \n      \n    });\n    \n       \n    \n  },\n\n  \n  \n  \n});\n  \n})()","export default(()=>{\n\nAFRAME.registerComponent('chat', {\n  schema: {\n\t  inputColor: {default: '#fff'},\n    keyboardColor: {default: '#fff'},\n    highlightColor: {default: '#1a79dc'}\n  },\n  \n  dependencies: ['aframe-keyboard'],\n  \n  init: function(){\n    \n    \n    \n    this.container = document.createElement('a-entity');\n    this.container.setAttribute('visible',false);\n    \n    this.input = document.createElement('a-text');\n    this.input.setAttribute('font','dejavu');\n    this.input.setAttribute('color',this.data.inputColor);\n    this.input.setAttribute('value','Enter message ...');\n    this.input.setAttribute('scale','0.7 0.7 0.7');\n    this.input.setAttribute('rotation','-20 0 0');\n    this.input.setAttribute('position','-0.5 1.9 -1.5');\n    \n    this.keyboard = document.createElement('a-entity');\n    this.keyboard.setAttribute('a-keyboard','dismissable:false');\n    this.keyboard.setAttribute('position','-1 1.6 -1.5');\n    this.keyboard.setAttribute('rotation','-20 0 0');\n    this.keyboard.setAttribute('scale','4 4 4');\n    \n   \n    this.container.appendChild(this.input);\n    this.container.appendChild(this.keyboard);\n    this.el.appendChild(this.container);\n    \n    \n    \n    const self = this;\n    \n    document.addEventListener('gameStart',e=>{\n      \n      self.normalKeys = document.querySelectorAll('.collidable');\n          \n      document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            \n        \n      const dummy = document.querySelector('#standard-chat-dummy');\n      \n      self.value = '';\n      \n      function submit(){\n        self.input.setAttribute('value', self.value);\n            self.container.setAttribute('visible',false);\n            document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                }) \n            self.keyboard.components['a-keyboard'].pause();\n            document.removeEventListener('a-keyboard-update', updateInput)\n            CS1.socket.emit('msg',{msg:self.value});\n            dummy.blur(); \n      }\n      \n      function updateInput(e){\n        let code = parseInt(e.detail.code)\n        switch(code) {\n          case 8:\n            self.value = self.value.slice(0, -1)\n            break\n          case 999:\n            submit();\n            return\n          case 13:\n            submit();\n            return \n          default:\n            if(!e.detail.value)return;\n            if(e.detail.code==40)e.detail.value='\\n';\n            self.value = self.value + e.detail.value;\n            break\n          }\n          self.input.setAttribute('value', self.value + '_')\n      }\n      \n      \n      function submitQuest(){\n        self.input.setAttribute('value', self.value);\n            self.container.setAttribute('visible',false);\n            document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            self.keyboard.components['a-keyboard'].pause();\n            document.removeEventListener('a-keyboard-update', updateInputQuest)\n            CS1.socket.emit('msg',{msg:self.value});\n      }\n      \n      \n      function updateInputQuest(e){\n        let code = parseInt(e.detail.code)\n        switch(code) {\n          case 8:\n            self.value = self.value.slice(0, -1)\n            break\n          case 999:\n            submitQuest();\n            return\n          default:\n            if(!e.detail.value)return;\n            if(e.detail.code==40)e.detail.value='\\n';\n            self.value = self.value + e.detail.value\n            break\n          }\n          self.input.setAttribute('value', self.value + '_')\n      }\n      \n      let lh = CS1.myPlayer.components.player.lh.components[\"oculus-touch-controls\"];\n      let rh = CS1.myPlayer.components.player.rh.components[\"oculus-touch-controls\"];\n      \n      switch(CS1.device){\n          \n        case \"Oculus Quest\":\n          \n          let cursor = document.querySelector('a-cursor');\n          cursor.pause();\n          if(CS1.cam.components.raycaster)CS1.cam.components.raycaster.pause();\n          lh.el.addEventListener('bbuttondown',e=>{\n            self.value = '';\n            self.input.setAttribute('value', self.value);\n            document.addEventListener('a-keyboard-update', updateInputQuest)\n            self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = self.container.getAttribute('visible');\n            self.container.setAttribute('visible',!v);\n            self.keyboard.components['a-keyboard'].play();\n            if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            }else{\n              self.keys.forEach(e=>{\n                 e.classList.add('collidable')\n                }) \n            }\n          });\n          rh.el.addEventListener('bbuttondown',e=>{\n            self.value = '';\n            self.input.setAttribute('value', self.value);\n            document.addEventListener('a-keyboard-update', updateInputQuest)\n            self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n            let v = self.container.getAttribute('visible');\n            self.container.setAttribute('visible',!v);\n            self.keyboard.components['a-keyboard'].play();\n            if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 e.classList.remove('collidable')\n                });\n            }else{\n              AFK.template.toggleActiveMode('normal');\n            }\n          });  \n          \n          \n          \n          break;\n        case \"Mobile\":\n          CS1.chatInput = document.querySelector('#mobile-chat-input');\n          CS1.chatInput.style.position = 'absolute';\n          CS1.chatInput.style.top = '10px';\n          CS1.chatInput.style.margin = '0 auto';\n          \n          CS1.chatInput.addEventListener('keydown',e=>{\n            switch(e.keyCode){\n              case 13:\n                CS1.socket.emit('msg',{msg:CS1.chatInput.value});\n                CS1.chatInput.style.zIndex = -1000;\n                CS1.chatInput.style.top = '-100px';\n                CS1.chatInput.blur();\n                break;\n            }\n          });\n          document.addEventListener('doubleTapChat',e=>{\n            \n            if(CS1.chatInput.style.zIndex == -1000){\n              CS1.chatInput.style.zIndex = 200;\n              CS1.chatInput.style.top = '10px';\n            }else{\n              CS1.chatInput.style.zIndex = -1000;\n              CS1.chatInput.style.top = '-100px';\n            }\n\n            \n\n          });\n          \n          break;\n        case \"Standard\":\n          document.querySelector('#mobile-chat-input').setAttribute('style','position:absolute;top:-1000px');\n          const dummy = document.querySelector('#standard-chat-dummy');\n          document.addEventListener('keypress',e=>{\n            if(e.keyCode==61){\n              self.value = '';\n              self.input.setAttribute('value', self.value);\n              document.addEventListener('a-keyboard-update', updateInput)\n              self.container.object3D.rotation.y = CS1.cam.object3D.rotation.y;\n              let v = self.container.getAttribute('visible');\n              self.container.setAttribute('visible',!v); \n              self.keyboard.components['a-keyboard'].play();\n              if(v){\n               document.querySelectorAll('.collidable').forEach(e=>{\n                 dummy.blur();\n                 e.classList.remove('collidable');\n                })  \n            }else{\n              AFK.template.toggleActiveMode('normal');\n              self.normalKeys.forEach(e=>{\n                 dummy.focus();\n                 e.classList.add('collidable');\n                })  \n            }\n            }\n          });     \n          break;\n          \n      }\n      \n      \n    });\n    \n    \n    \n  },\n  \n \n  \n  \n});\n  \n})()","export default(()=>{\n\nAFRAME.registerComponent('cs1-jukebox', {\n  schema: {\n\t\n  },\n  \n  init: function(){\n    CS1.jukebox.audio.addEventListener('jukeboxplay',e=>{\n      CS1.socket.emit('jukebox',{action:'play',index:e.detail.index,player:CS1.myPlayer.name});\n      CS1.log(`${CS1.myPlayer.name} is playing ${CS1.jukebox.songNames[e.detail.index]}.`);\n    });\n    CS1.jukebox.audio.addEventListener('jukeboxpause',e=>{\n      CS1.socket.emit('jukebox',{action:'pause',player:CS1.myPlayer.name});\n      CS1.log(`${CS1.myPlayer.name} has paused the jukebox.`);\n    }); \n    CS1.socket.on('jukebox',data=>{\n      if(data.player==CS1.myPlayer.name)return;\n      switch(data.action){\n        case 'play':\n          CS1.jukebox.play(data.index);\n          CS1.log(`${data.player} is playing ${CS1.jukebox.songNames[data.index]}!`);\n          break;\n        case 'pause':\n          CS1.jukebox.pause(false);\n          CS1.log(`${data.player} has paused the jukebox!`);\n          break;\n      }\n    });\n  }\n});\n  \n})()","export default(()=>{\n\n/**\n * Curve component for A-Frame to deal with spline curves\n */\nconst zAxis = new THREE.Vector3(0, 0, 1)\nconst degToRad = THREE.Math.degToRad\n\nAFRAME.registerComponent('curve-point', {\n  // dependencies: ['position'],\n\n  schema: {},\n\n  init: function () {\n    this.el.addEventListener('componentchanged', this.changeHandler.bind(this))\n    this.el.emit('curve-point-change')\n  },\n\n  changeHandler: function (event) {\n    if (event.detail.name == 'position') {\n      this.el.emit('curve-point-change')\n    }\n  }\n})\n\nAFRAME.registerComponent('curve', {\n  // dependencies: ['curve-point'],\n\n  schema: {\n    type: {\n      type: 'string',\n      default: 'CatmullRom',\n      oneOf: ['CatmullRom', 'CubicBezier', 'QuadraticBezier', 'Line']\n    },\n    closed: {\n      type: 'boolean',\n      default: false\n    }\n  },\n\n  init: function () {\n    this.pathPoints = null\n    this.curve = null\n\n    this.el.addEventListener('curve-point-change', this.update.bind(this))\n  },\n\n  update: function (oldData) {\n    this.points = Array.from(\n      this.el.querySelectorAll('a-curve-point, [curve-point]')\n    )\n\n    if (this.points.length <= 1) {\n      console.warn('At least 2 curve-points needed to draw a curve')\n      this.curve = null\n    } else {\n      // Get Array of Positions from Curve-Points\n      var pointsArray = this.points.map(function (point) {\n        if (\n          point.x !== undefined &&\n          point.y !== undefined &&\n          point.z !== undefined\n        ) {\n          return point\n        }\n\n        return point.object3D.getWorldPosition()\n      })\n\n      // Update the Curve if either the Curve-Points or other Properties changed\n      if (\n        !AFRAME.utils.deepEqual(pointsArray, this.pathPoints) ||\n        (oldData !== 'CustomEvent' &&\n          !AFRAME.utils.deepEqual(this.data, oldData))\n      ) {\n        this.curve = null\n\n        this.pathPoints = pointsArray\n\n        // TODO: Make other Curve-Types work\n        // this.threeConstructor = THREE[this.data.type + 'Curve3'];\n        this.threeConstructor = THREE['CatmullRomCurve3']\n\n        if (!this.threeConstructor) {\n          throw new Error(\n            'No Three constructor of type (case sensitive): ' +\n              this.data.type +\n              'Curve3'\n          )\n        }\n\n        // Create Curve\n        this.curve = new this.threeConstructor(this.pathPoints)\n        this.curve.closed = this.data.closed\n\n        this.el.emit('curve-updated')\n      }\n    }\n  },\n\n  remove: function () {\n    this.el.removeEventListener('curve-point-change', this.update.bind(this))\n  },\n\n  closestPointInLocalSpace: function closestPoint (\n    point,\n    resolution,\n    testPoint,\n    currentRes\n  ) {\n    if (!this.curve) throw Error('Curve not instantiated yet.')\n    resolution = resolution || 0.1 / this.curve.getLength()\n    currentRes = currentRes || 0.5\n    testPoint = testPoint || 0.5\n    currentRes /= 2\n    var aTest = testPoint + currentRes\n    var bTest = testPoint - currentRes\n    var a = this.curve.getPointAt(aTest)\n    var b = this.curve.getPointAt(bTest)\n    var aDistance = a.distanceTo(point)\n    var bDistance = b.distanceTo(point)\n    var aSmaller = aDistance < bDistance\n    if (currentRes < resolution) {\n      var tangent = this.curve.getTangentAt(aSmaller ? aTest : bTest)\n      if (currentRes < resolution) {\n        return {\n          result: aSmaller ? aTest : bTest,\n          location: aSmaller ? a : b,\n          distance: aSmaller ? aDistance : bDistance,\n          normal: normalFromTangent(tangent),\n          tangent: tangent\n        }\n      }\n    }\n    if (aDistance < bDistance) {\n      return this.closestPointInLocalSpace(point, resolution, aTest, currentRes)\n    } else {\n      return this.closestPointInLocalSpace(point, resolution, bTest, currentRes)\n    }\n  }\n})\n\nvar tempQuaternion = new THREE.Quaternion()\n\nfunction normalFromTangent (tangent) {\n  var lineEnd = new THREE.Vector3(0, 1, 0)\n  tempQuaternion.setFromUnitVectors(zAxis, tangent)\n  lineEnd.applyQuaternion(tempQuaternion)\n  return lineEnd\n}\n\nAFRAME.registerShader('line', {\n  schema: {\n    color: { default: '#ff0000' }\n  },\n\n  init: function (data) {\n    this.material = new THREE.LineBasicMaterial(data)\n  },\n\n  update: function (data) {\n    this.material = new THREE.LineBasicMaterial(data)\n  }\n})\n\nAFRAME.registerComponent('draw-curve', {\n  // dependencies: ['curve', 'material'],\n\n  schema: {\n    curve: { type: 'selector' }\n  },\n\n  init: function () {\n    this.data.curve.addEventListener('curve-updated', this.update.bind(this))\n  },\n\n  update: function () {\n    if (this.data.curve) {\n      this.curve = this.data.curve.components.curve\n    }\n\n    if (this.curve && this.curve.curve) {\n      var mesh = this.el.getOrCreateObject3D('mesh', THREE.Line)\n\n      lineMaterial = mesh.material\n        ? mesh.material\n        : new THREE.LineBasicMaterial({\n          color: '#ff0000'\n        })\n\n      var lineGeometry = new THREE.Geometry()\n      lineGeometry.vertices = this.curve.curve.getPoints(\n        this.curve.curve.points.length * 10\n      )\n\n      this.el.setObject3D('mesh', new THREE.Line(lineGeometry, lineMaterial))\n    }\n  },\n\n  remove: function () {\n    this.data.curve.removeEventListener('curve-updated', this.update.bind(this))\n    this.el.getObject3D('mesh').geometry = new THREE.Geometry()\n  }\n})\n\nAFRAME.registerComponent('clone-along-curve', {\n  // dependencies: ['curve'],\n\n  schema: {\n    curve: { type: 'selector' },\n    spacing: { default: 1 },\n    rotation: {\n      type: 'vec3',\n      default: '0 0 0'\n    },\n    scale: {\n      type: 'vec3',\n      default: '1 1 1'\n    }\n  },\n\n  init: function () {\n    this.el.addEventListener('model-loaded', this.update.bind(this))\n    this.data.curve.addEventListener('curve-updated', this.update.bind(this))\n  },\n\n  update: function () {\n    this.remove()\n\n    if (this.data.curve) {\n      this.curve = this.data.curve.components.curve\n    }\n\n    if (!this.el.getObject3D('clones') && this.curve && this.curve.curve) {\n      var mesh = this.el.getObject3D('mesh')\n\n      var length = this.curve.curve.getLength()\n      var start = 0\n      var counter = start\n\n      const cloneMesh = this.el.getOrCreateObject3D('clones', THREE.Group)\n\n      const parent = new THREE.Object3D()\n      mesh.scale.set(this.data.scale.x, this.data.scale.y, this.data.scale.z)\n      mesh.rotation.set(\n        degToRad(this.data.rotation.x),\n        degToRad(this.data.rotation.y),\n        degToRad(this.data.rotation.z)\n      )\n      mesh.rotation.order = 'YXZ'\n\n      parent.add(mesh)\n\n      while (counter <= length) {\n        const child = parent.clone(true)\n\n        child.position.copy(this.curve.curve.getPointAt(counter / length))\n\n        tangent = this.curve.curve.getTangentAt(counter / length).normalize()\n\n        child.quaternion.setFromUnitVectors(zAxis, tangent)\n\n        cloneMesh.add(child)\n\n        counter += this.data.spacing\n      }\n    }\n  },\n\n  remove: function () {\n    this.curve = null\n    if (this.el.getObject3D('clones')) {\n      this.el.removeObject3D('clones')\n    }\n  }\n})\n\nAFRAME.registerPrimitive('a-draw-curve', {\n  defaultComponents: {\n    'draw-curve': {}\n  },\n  mappings: {\n    curveref: 'draw-curve.curve'\n  }\n})\n\nAFRAME.registerPrimitive('a-curve-point', {\n  defaultComponents: {\n    'curve-point': {}\n  },\n  mappings: {}\n})\n\nAFRAME.registerPrimitive('a-curve', {\n  defaultComponents: {\n    curve: {}\n  },\n\n  mappings: {\n    type: 'curve.type'\n  }\n})\n\n/**\n * Alongpath component for A-Frame.\n * Move Entities along a predefined Curve\n */\nAFRAME.registerComponent('alongpath', {\n  // dependencies: ['curve'],\n\n  schema: {\n    curve: { default: '' },\n    triggers: { default: 'a-curve-point' },\n    triggerRadius: { type: 'number', default: 0.01 },\n    dur: { default: 1000 },\n    delay: { default: 0 },\n    loop: { default: false },\n    rotate: { default: false },\n    resetonplay: { default: true }\n  },\n\n  init: function () {\n    // We have to fetch curve and triggers manually because of an A-FRAME ISSUE\n    // with Property-Type \"Selector\" / \"SelectorAll\": https://github.com/aframevr/aframe/issues/2517\n  },\n\n  update: function (oldData) {\n    this.curve = document.querySelector(this.data.curve)\n    this.triggers = this.curve.querySelectorAll(this.data.triggers)\n\n    if (!this.curve) {\n      console.warn(\"Curve not found. Can't follow anything...\")\n    } else {\n      this.initialPosition = this.el.object3D.position\n    }\n\n    this.reset()\n  },\n\n  reset: function () {\n    // Reset to initial state\n    this.interval = 0\n\n    this.el.removeState('endofpath')\n    this.el.removeState('moveonpath')\n\n    if (this.activeTrigger) {\n      this.activeTrigger.removeState('alongpath-active-trigger')\n      this.activeTrigger = null\n    }\n  },\n\n  getI_: function (interval, delay, dur) {\n    var i = 0\n\n    if (interval - delay >= dur) {\n      // Time is up, we should be at the end of the path\n      i = 1\n    } else if (interval - delay < 0) {\n      // We are still waiting for the delay-time to finish\n      // so keep entity at the beginning of the path\n      i = 0\n    } else {\n      // Update path position based on timing\n      i = (interval - delay) / dur\n    }\n\n    return i\n  },\n\n  tick: function (time, timeDelta) {\n    var curve = this.curve.components['curve']\n      ? this.curve.components['curve'].curve\n      : null\n\n    if (curve) {\n      // Only update position if we didn't reach\n      // the end of the path\n      if (!this.el.is('endofpath')) {\n        this.interval = this.interval + timeDelta\n\n        var i = this.getI_(this.interval, this.data.delay, this.data.dur)\n\n        if (this.data.loop === false && i >= 1) {\n          // Set the end-position\n          this.el.setAttribute(\n            'position',\n            curve.points[curve.points.length - 1]\n          )\n\n          // We have reached the end of the path and are not going\n          // to loop back to the beginning therefore set final state\n          this.el.removeState('moveonpath')\n          this.el.addState('endofpath')\n          this.el.emit('movingended')\n        } else if (this.data.loop === true && i >= 1) {\n          // We have reached the end of the path\n          // but we are looping through the curve,\n          // so restart here.\n          this.el.emit('movingended')\n          this.interval = this.data.delay\n        } else {\n          // We are starting to move or somewhere in the middle of the path…\n          if (!this.el.is('moveonpath')) {\n            this.el.addState('moveonpath')\n            this.el.emit('movingstarted')\n          }\n\n          // …updating position\n          var p = curve.getPoint(i)\n          this.el.setAttribute('position', p)\n        }\n\n        // Update Rotation of Entity\n        if (this.data.rotate === true) {\n          var nextInterval = this.interval + timeDelta\n          var nextPosition = curve.getPoint(\n            this.getI_(nextInterval, this.data.delay, this.data.dur)\n          )\n\n          this.el.object3D.lookAt(nextPosition)\n        }\n\n        // Check for Active-Triggers\n        if (this.triggers && this.triggers.length > 0) {\n          this.updateActiveTrigger()\n        }\n      }\n    } else {\n      console.error(\n        'The entity associated with the curve property has no curve component.'\n      )\n    }\n  },\n\n  play: function () {\n    if (this.data.resetonplay) {\n      this.reset()\n    }\n  },\n\n  remove: function () {\n    this.el.object3D.position.copy(this.initialPosition)\n  },\n\n  updateActiveTrigger: function () {\n    for (var i = 0; i < this.triggers.length; i++) {\n      if (this.triggers[i].object3D) {\n        if (\n          this.triggers[i].object3D.position.distanceTo(\n            this.el.object3D.position\n          ) <= this.data.triggerRadius\n        ) {\n          // If this element is not the active trigger, activate it - and if necessary deactivate other triggers.\n          if (this.activeTrigger && this.activeTrigger != this.triggers[i]) {\n            this.activeTrigger.removeState('alongpath-active-trigger')\n            this.activeTrigger.emit('alongpath-trigger-deactivated')\n\n            this.activeTrigger = this.triggers[i]\n            this.activeTrigger.addState('alongpath-active-trigger')\n            this.activeTrigger.emit('alongpath-trigger-activated')\n          } else if (!this.activeTrigger) {\n            this.activeTrigger = this.triggers[i]\n            this.activeTrigger.addState('alongpath-active-trigger')\n            this.activeTrigger.emit('alongpath-trigger-activated')\n          }\n\n          break\n        } else {\n          // If this Element was the active trigger, deactivate it\n          if (this.activeTrigger && this.activeTrigger == this.triggers[i]) {\n            this.activeTrigger.removeState('alongpath-active-trigger')\n            this.activeTrigger.emit('alongpath-trigger-deactivated')\n            this.activeTrigger = null\n          }\n        }\n      }\n    }\n  }\n})\n\n  \n\n\n  \n})()","import alongpath from '../../com/components/alongpath';\n\nexport default (()=>{\n  \n  function thruster(offset){\n    const t = document.createElement('a-sphere');\n    t.setAttribute('radius','0.6');\n    t.setAttribute('position',offset);\n    t.setAttribute('shader-frog','name:Thruster_Shader'); \n    return t;\n  }\n  \n  function thrusterSound(){\n    const s = document.createElement('a-sound');\n    s.setAttribute('src','https://cdn.glitch.com/4b320546-5c89-4b01-9e73-9a6ba6ffff98%2FThruster.mp3?v=1574344231359');\n    s.setAttribute('loop',true);\n    s.setAttribute('volume',5);\n    s.setAttribute('autoplay',true);\n    return s; \n  }\n  \n  document.addEventListener('gameStart',e=>{\n       \n    const cyl = document.createElement('a-cylinder');\n    cyl.setAttribute('radius','0.6');\n    cyl.setAttribute('height','3');\n    cyl.setAttribute('animate','');\n    cyl.setAttribute('shader-frog','name:Thruster_Shader');\n    CS1.scene.appendChild(cyl);\n    \n    CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.r = \"0.2\";\n    CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.g = \"0.4\";\n    CS1.shaderfrog.Thruster_Shader.uniforms.backgroundColor.value.g = \"1\";\n    const ship = document.querySelector('#max-delta');\n    ship.appendChild(thruster('0 0 5'));\n    ship.appendChild(thruster('3.2 0 -4'));\n    ship.appendChild(thruster('-3.2 0 -4'));\n    ship.appendChild(thrusterSound());\n    const ship2 = ship.cloneNode();\n    ship2.setAttribute('id','max-delta2');\n    ship2.appendChild(thruster('0 0 5'));\n    ship2.appendChild(thruster('3.2 0 -4'));\n    ship2.appendChild(thruster('-3.2 0 -4'));\n    ship2.setAttribute('alongpath','curve: #track2; dur:3000');\n    ship2.appendChild(thrusterSound());\n    CS1.scene.appendChild(ship2);\n    const ship3 = ship.cloneNode();\n    ship3.setAttribute('id','max-delta3');\n    ship3.appendChild(thruster('0 0 5'));\n    ship3.appendChild(thruster('3.2 0 -4'));\n    ship3.appendChild(thruster('-3.2 0 -4'));\n    ship3.setAttribute('alongpath','curve: #track3; dur:3000');\n    ship3.appendChild(thrusterSound());\n    CS1.scene.appendChild(ship3);\n    \n    const gold = document.querySelector('#gold');\n    gold.components.grabbable.postRelease = e => {\n      gold.setAttribute('rotation','0 0 0');\n    }\n    \n     \n  });\n  \n  \n  AFRAME.registerComponent('animate', {\n    \n    \n    schema: {\n      color: {default: 'red'}\n    },\n\n    init: function(){\n\n    },\n    \n    tick: function(t,dt){\n      \n      const v = Math.sin(t/600);\n      this.el.object3D.position.y = 4 * v + 8;\n      this.el.object3D.rotateY(v/4);\n      \n    }\n    \n    \n  });\n  \n \n  \n})()","let CS1 = window.CS1 = {};\nimport utils from './core/utils/utils';\nutils(CS1);\nimport loadSpinner from './core/load/load-spinner';\nimport './core/load/load-spinner.css';\nimport grabbable from './core/components/grabbable';\nimport navpointer from './core/components/nav-pointer';\nimport weatherviz from './core/components/weather-viz';\nimport shaderfrog from './core/components/shaderfrog/shader-frog';\nshaderfrog(CS1);\nimport proximityGlitch from './demo/components/proximity-glitch'\nproximityGlitch(CS1);\nimport stats from './stats/stats';\nimport './stats/stats.css';\nstats(CS1);\nimport game from './core/components/game';\ngame(CS1);\nimport player from './core/components/player';\nplayer(CS1);\nimport {bgmlite} from './core/services/bgm';\nbgmlite(CS1);\nimport socket from './core/socket/client-socket';\nsocket(CS1);\nimport collectible from './core/components/collectible';\ncollectible(CS1);\nimport './main.css';\nimport login from './core/login/login';\nimport './core/login/login.css';\nimport cloud from './demo/components/cloud';\nimport npc from './demo/components/npc';\nnpc(CS1);\nimport dotrow from './demo/components/dotrow';\nimport userdata from './core/components/userdata';\nuserdata(CS1);\nimport iotAPI from './demo/components/iot-api';\niotAPI(CS1);\nimport log from './core/components/log';\nimport launchable from './core/components/launchable';\nimport launchrow from './demo/components/launchrow';\nimport vrui from './core/components/vrui/vrui';\nimport chat from './core/components/chat';\nimport cs1Jukebox from './core/components/cs1-jukebox';\nimport mycomponents from './core/components/my-components';\n\n//supress console.warn\nwindow.console.warn = function(){};\n\n\n  \n\n  ","export default CS1=>{\n  CS1.utils = {\n    uid: (()=>{\n        const firstItem = {\n            value: \"0\"\n        };\n        /*length can be increased for lists with more items.*/\n        let counter = \"123456789\".split('')\n            .reduce((acc, curValue, curIndex, arr) => {\n                const curObj = {};\n                curObj.value = curValue;\n                curObj.prev = acc;\n\n                return curObj;\n            }, firstItem);\n        firstItem.prev = counter;\n\n        return function () {\n            let now = Date.now();\n            if (typeof performance === \"object\" && typeof performance.now === \"function\") {\n                now = performance.now().toString().replace('.', '');\n            }\n            counter = counter.prev;\n            return `${now}${Math.random().toString(16).substr(2)}${counter.value}`;\n        }\n    })(),\n    \n    isEqual : function (value, other) {\n      \n      function compare(item1, item2) {\n\n        // Get the object type\n        var itemType = Object.prototype.toString.call(item1);\n\n        // If the two items are not the same type, return false\n        if (itemType !== Object.prototype.toString.call(item2)) return false;\n\n        // If it's a function, convert to a string and compare\n        // Otherwise, just compare\n        if (itemType === '[object Function]') {\n          if (item1.toString() !== item2.toString()) return false;\n        } else {\n          if (item1 !== item2) return false;\n        }\n      }\n      \n\n      // ...\n\n      // Compare properties\n      for (var key in value) {\n        if (value.hasOwnProperty(key)) {\n            if (compare(value[key], other[key]) === false) return false;\n        }\n      }\n\n      // If nothing failed, return true\n      return true;\n\n    },\n    \n    toColor: function (num) {\n          num >>>= 0;\n          var b = num & 0xFF,\n              g = (num & 0xFF00) >>> 8,\n              r = (num & 0xFF0000) >>> 16,\n              a = ( (num & 0xFF000000) >>> 24 ) / 255 ;\n          return \"rgba(\" + [r, g, b, a].join(\",\") + \")\";\n      },\n    \n    randomFromArray: function (array) {\n      if(array.length>0){\n        return array[Math.floor(Math.random()*array.length)];\n      }else{\n        return false;\n      }\n    }\n       \n\n  }\n}","export default CS1=>{\n\n AFRAME.registerComponent('proximity-glitch', {\n   schema: {\n     threshold: {type: 'number', default: 2},\n     affects: {type: 'string', default: ''},\n     value:{type:'number',default:-0.1},\n     sound: {type: 'string',default:'https://cdn.glitch.com/6b222f93-e194-41e2-aaf6-59e5af64658d%2Fbuzz.mp3?1555284089077'},\n   },\n   init: function () {\n      this.sound = document.createElement('a-sound');\n      this.sound.setAttribute('src',`url(${this.data.sound})`);\n      this.el.appendChild(this.sound);\n      this.soundIsPlaying=false;\n      this.sound.addEventListener('sound-ended',e=>{\n        this.soundIsPlaying=false;     \n      });\n      this.scene=document.querySelector('a-scene');\n      this.scene.setAttribute('glitch','');\n      this.baseEffects=this.scene.getAttribute('effects');\n    },\n   tick: function (t,dt) {\n     if(CS1.game.playerDistanceTo(this.el)<this.data.threshold){  \n       this.scene.setAttribute('effects',`glitch,${this.baseEffects}`);\n       if(this.data.affects){\n         CS1.hud[this.data.affects].setValue(CS1.hud[this.data.affects].value+this.data.value);\n         if(!this.soundIsPlaying){\n           this.sound.components.sound.playSound();\n           this.soundIsPlaying = true;\n         }\n       }\n     }else{\n       this.scene.setAttribute('effects',this.baseEffects);\n     }\n   }\n  });\n\n}","let config = {\n  regions:{\n    top:true,\n    left:false,\n    right:false,\n    bottom:false\n  }\n}\n\nimport RingDial from './elements/ring-dial';\nimport Meter from './elements/meter';\n\nexport default CS1=>{\n\n  window.addEventListener('load', function () {\n    CS1.stats = {};\n    let statsElement = document.createElement('div');\n    statsElement.id = 'vr-stats';\n    CS1.stats.container = statsElement;\n    if(!statsElement)return;\n    let containers = generateRegions(statsElement);\n    containers.top.style.pointerEvents='none';\n    CS1.stats.pointsDial = new RingDial({\n        container: containers.top,\n        labelText: 'points',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: 'red',\n        max: 1000                     \n    });\n    CS1.stats.energyDial = new RingDial({\n        container: containers.top,\n        labelText: 'energy',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: 'lime',\n        max: 1000\n    });\n    CS1.stats.energyDial.setValue(500);\n    CS1.stats.magicDial = new RingDial({\n        container: containers.top,\n        labelText: 'magic',\n        labelColor: '#ccc',\n        gradientColor1: 'white',\n        gradientColor2: '#b45ef9',\n        suffix: '%',\n        max: 100                     \n    });\n    CS1.stats.oxygenMeter = new Meter(containers.top,'oxygen','#ccc',1.0);\n  \n  function generateRegions(statsElement){\n   let containers = {};\n   if(config.regions.top){\n     let top = document.createElement('div');\n     top.id = 'stats-top';\n     top.style.position = 'relative';\n     top.style.left = '0px';\n     top.style.top = '0px';\n     top.style.width = 2000 + 'px';\n     top.style.height = 2000/4 + 'px';\n     containers.top = top;\n     statsElement.appendChild(top);\n   }\n   if(config.regions.left){\n   \n   }\n   if(config.regions.right){\n   \n   }\n   if(config.regions.bottom){\n     let bottom = document.createElement('div');\n     bottom.id = 'stats-bottom';\n     bottom.style.position = 'absolute';\n     bottom.style.left = '0px';\n     bottom.style.top = 900 - 2000/8 + 'px';\n     bottom.style.width = 2000 + 'px';\n     bottom.style.height = 2000/8 + 'px';\n     containers.bottom = bottom;\n     statsElement.appendChild(bottom);\n   }\n   return containers;\n  }\n  \n  })\n  \n}\n","import config from '../../../.data/client-config.json';\nexport default CS1=>{AFRAME.registerComponent('game', {\n  schema: {mode:{type: 'string',default:'standard'}},\n  init: function () {\n    \n    CS1.game = this;\n    this.isRunning = false;\n    \n    this.determineDevice();\n    \n    this.name = config.gameName;\n    this.announcements = {};\n    this.announcements['welcome'] = config.welcomeMsg;\n    this.welcomeDelay = config.voice.welcomeDelay;\n    \n    document.querySelector('#scene-container').style.display='block';\n    document.querySelector('#loading-screen').style.display='none';\n    \n        \n    CS1.voices = window.speechSynthesis.getVoices();\n    \n    CS1.say = function(msg,name=\"none given\") {\n      var msg = new SpeechSynthesisUtterance(msg);\n      if(name == \"none given\")\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == config.voice.name; })[0];\n      else\n        msg.voice = speechSynthesis.getVoices().filter(function(voice) { return voice.name == name; })[0];\n      msg.pitch = config.voice.pitch;\n      msg.rate = config.voice.rate;\n      msg.volume = config.voice.volume;\n      speechSynthesis.speak(msg);\n    }\n    \n    CS1.sayall = function(msg,name){CS1.socket.emit('sayall',{msg:msg,name:name})}\n    \n    CS1.printVoices = ()=>{\n      speechSynthesis.getVoices().forEach(v=>{\n        console.log(v.name,v.lang);\n      });\n    }\n    \n    CS1.sounds = {};\n    \n    Object.keys(config.sounds).forEach(soundName=>{\n      CS1.sounds[soundName] = new Audio(config.sounds[soundName].url);\n      CS1.sounds[soundName].loop = config.sounds[soundName].loop || false;\n      CS1.sounds[soundName].volume = config.sounds[soundName].volume || 1;\n    });\n    \n    CS1.scene=AFRAME.scenes[0];\n    \n    CS1.otherPlayers = {};\n    \n  \n  },\n  \n  tick: function (time,dt) {\n   \n    \n    \n  },\n  \n  start: function () {\n    \n    CS1.logall = function(msg,channel=''){\n      CS1.socket.emit('logall',{msg:msg,channel:channel});\n    }\n    \n    if(CS1.device == \"Oculus Quest\"){\n      CS1.myPlayer.leftHand = CS1.myPlayer.components.player.lh;\n      CS1.myPlayer.rightHand = CS1.myPlayer.components.player.rh;\n      CS1.socket.emit('logall',{msg:`${CS1.myPlayer.name} is playing with an Oculus VR device!`,channel:'0'});\n    }\n    \n    CS1.game.hasBegun = true;\n\n    // Create a new event    \n    let event = new CustomEvent(\n      \"gameStart\", \n      {\n        detail: {\n          message: \"Let's play!\",\n          time: new Date(),\n        },\n        bubbles: true,\n        cancelable: true\n      }\n    );\n\n    // Dispatch the gameStart event\n    document.body.dispatchEvent(event);\n    \n  },\n  \n  playerDistanceTo: function (entity) {\n    return CS1.myPlayer.object3D.position.distanceTo(entity.object3D.position);\n  },\n  \n  fireParticles: function(el){\n    el.components.particles.fire();\n  },\n  \n  determineDevice: function(){\n    \n    navigator.getVRDisplays().then(function(displays) {\n      let scn = document.querySelector('a-scene');\n      if(displays && displays[0] && (displays[0].displayName == \"Oculus Quest\")){\n        document.querySelector('#cam-cursor').setAttribute('visible',false);\n        document.querySelector('#cam-cursor').setAttribute('fuse',false);\n        document.querySelector('#cam-cursor').pause();\n        CS1.device = \"Oculus Quest\";\n      }else if(AFRAME.utils.device.isMobile()){\n        CS1.myPlayer.cursor = document.querySelector('#cam-cursor');\n        CS1.device = \"Mobile\";\n        CS1.log(\"Mobile\");\n        scn.setAttribute('vr-mode-ui','enabled: false');\n        CS1.mylatesttap=0;\n        let mbc = document.querySelector('#mobile-btn-container');\n        \n        let icon = document.createElement('img');\n        \n        icon.setAttribute('src','https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fmenu-64-icon.png?v=1562375093680');\n        icon.setAttribute('style','position:absolute;right:0px');\n        mbc.appendChild(icon);  \n        \n        icon.addEventListener('touchstart',e=>{\n          \n           let now = new Date().getTime();\n           let timesince = now - CS1.mylatesttap;\n           \n           if((timesince < 600) && (timesince > 0)){\n            // double tap  \n            \n            // Create a new event    \n            let event = new CustomEvent(\n              \"doubleTapMenu\", \n              {\n                detail: {\n                  message: \"Double Tappin!\",\n                  time: new Date(),\n                },\n                bubbles: true,\n                cancelable: true\n              }\n            );\n            // Dispatch the event\n            document.body.dispatchEvent(event); \n           }else{\n              // too much time to be a doubletap\n             \n           }\n           CS1.mylatesttap = new Date().getTime();          \n          \n        });\n        \n        \n        let icon2 = document.createElement('img');\n        \n        icon2.setAttribute('src','https://cdn.glitch.com/376724db-dc5f-44ca-af35-36d00838079c%2Fchat-64-icon.png?v=1562528152057');\n        icon2.setAttribute('style','position:absolute;left:0px');\n        mbc.appendChild(icon2);  \n        \n        icon2.addEventListener('touchstart',e=>{\n          \n           let now = new Date().getTime();\n           let timesince = now - CS1.mylatesttap;\n           \n           if((timesince < 600) && (timesince > 0)){\n            // double tap  \n            \n            // Create a new event    \n            let event = new CustomEvent(\n              \"doubleTapChat\", \n              {\n                detail: {\n                  message: \"Double Tappin!\",\n                  time: new Date(),\n                },\n                bubbles: true,\n                cancelable: true\n              }\n            );\n            // Dispatch the event\n            document.body.dispatchEvent(event); \n           }else{\n              // too much time to be a doubletap\n             \n           }\n           CS1.mylatesttap = new Date().getTime();          \n          \n        });\n        \n        \n        \n        \n        \n        \n      \n        \n       } else{ //No headset and not mobile\n           CS1.device = \"Standard\";\n           scn.setAttribute('vr-mode-ui','enabled: false');\n           CS1.myPlayer.cursor = document.querySelector('#cam-cursor');\n       }   \n    \n    })\n  \n  }\n   \n});}","import config from '../../../.data/client-config.json';\n\nexport default CS1=>{\n  \n  AFRAME.registerSystem('player', {\n  schema: {\n    avatars:{default:config.avatar.models}\n  },  // System schema. Parses into `this.data`.\n\n  init: function () {\n    \n    function avatarType2Add(p,c){\n      \n      p.model.removeAttribute('gltf-model');\n\n      \n      if(!p.HEAD){\n        \n        \n        p.HEAD = document.createElement('a-gltf-model');\n        p.HAND_L = document.createElement('a-gltf-model');\n        p.HAND_R = document.createElement('a-gltf-model');\n        \n        p.model.appendChild(p.HEAD);\n        p.model.appendChild(p.HAND_L);\n        p.model.appendChild(p.HAND_R);\n        \n        p.HEAD.setAttribute('src',c.url);\n        p.HAND_L.setAttribute('src',c.lefthand);\n        p.HAND_R.setAttribute('src',c.righthand);\n        \n      }else{\n        p.HEAD.setAttribute('visible',true);\n        p.HAND_L.setAttribute('visible',true);\n        p.HAND_R.setAttribute('visible',true);\n      }\n      \n      \n    }\n    \n    \n    CS1.__addOtherPlayer = newPlayerObject=>{\n      console.log(`Adding new player with id: ${newPlayerObject.id}`)\n      console.log(newPlayerObject);\n      console.log(newPlayerObject.data);\n      let c = config.avatar.models[newPlayerObject.data.faceIndex];\n      let p = document.createElement('a-entity');\n      p.model = document.createElement('a-gltf-model');\n      p.avatarType = c.type;\n      p.faceIndex = newPlayerObject.data.faceIndex;\n      p.device = newPlayerObject.data.device;\n      p.appendChild(p.model);\n      p.setAttribute('player','');\n      p.model.setAttribute('shadow','');\n      p.model.setAttribute('scale',`${c.scale} ${c.scale} ${c.scale}`);\n      p.model.setAttribute('visible','true');\n      if(p.avatarType === 1){\n        \n         \n        p.model.setAttribute('src',`${c.url}`);\n        p.model.setAttribute('animation-mixer','clip:idle');\n        p.model.setAttribute('rotation',`${-newPlayerObject.data.rotation.x} ${newPlayerObject.data.rotation.y+180} ${newPlayerObject.data.rotation.z}`);\n        \n      } else if(p.avatarType === 2){\n         \n        avatarType2Add(p,c);\n       \n       \n      }\n        \n      p.id = newPlayerObject.id;\n      p.name = newPlayerObject.name;\n      p.setAttribute('position',`${newPlayerObject.data.position.x} ${newPlayerObject.data.position.y} ${newPlayerObject.data.position.z}`);\n      //DO SOMETHING MAYBE HERE WITH AVATAR TYPE 2\n      p.msg = document.createElement('a-entity');\n      let test = `Hello\\nI am\\n${newPlayerObject.name}!`;\n      p.msg.setAttribute('text',`value:${test};\n                                     align:center;\n                                     width:8;\n                                     wrap-count:24; \n                                     color:yellow`);\n      p.msg.setAttribute('position',c.msg.offset);\n      p.msg.setAttribute('rotation','0 0 0');\n      p.model.appendChild(p.msg);\n      CS1.scene.appendChild(p);\n      CS1.otherPlayers[p.id]=p;\n      CS1.sounds.playerJoined.play();\n    }\n  \n    CS1.__updateOtherPlayers = o=>{\n      Object.keys(o).forEach(function(key,index) {\n        if(key != CS1.socket.id){\n          if(CS1.otherPlayers[key]){\n            let c = config.avatar.models[o[key].faceIndex];\n            let op = CS1.otherPlayers[key];\n            \n            if(op.faceIndex != o[key].faceIndex){\n              \n              \n              op.faceIndex = o[key].faceIndex;\n              (c.type == 1)?op.model.setAttribute('src',c.url):op.model.setAttribute('src','');\n              \n              if(op.avatarType != c.type){\n                \n                op.avatarType = c.type;\n                \n                if(c.type == 1){\n                  //op.model.object3D.rotateY(Math.PI);\n                  //op.msg.setAttribute('rotation','0 0 0'); \n                  \n                  if(op.HEAD){\n                      op.HEAD.setAttribute('visible',false);\n                      op.HAND_L.setAttribute('visible',false);\n                      op.HAND_R.setAttribute('visible',false);\n                    }\n                  op.model.setAttribute('animation-mixer','clip:idle');\n                  op.model.object3D.position.y = 0;\n                  \n                  \n                }  \n                else{\n                  \n                  op.model.setAttribute('rotation','0 0 0');  \n                  avatarType2Add(op,c);\n                }\n                    \n                \n                  \n              }\n              \n              \n            }\n            op.setAttribute('position',`${o[key].position.x} ${o[key].position.y+c.yOffset} ${o[key].position.z}`);\n            op.model.setAttribute('scale',`${c.scale} ${c.scale} ${c.scale}`);\n            op.msg.setAttribute('text',`color:${c.msg.color}`);\n            if(    op.avatarType===2 &&   op.HEAD  &&  (op.device === 'Oculus Quest')   ){\n              \n              \n              op.model.object3D.rotation.set(0,  THREE.Math.degToRad(o[key].rotation.y+180), 0 );\n              if(op.isWalking){ \n                  op.model.object3D.position.y = Math.cos(CS1.myPlayer.timePlayed/100)/10;\n              }\n              \n              op.msg.object3D.position.set(0,3,0);\n              op.HEAD.object3D.position.y = 1.4;\n              op.HEAD.object3D.rotation.set( THREE.Math.degToRad(-o[key].rotation.x/2), 0, 0 );\n              \n              op.HAND_L.object3D.position.set(-1.2*o[key].lhp.x , 1.2*o[key].lhp.y+0.1, -3*o[key].lhp.z);\n              op.HAND_L.object3D.rotation.set(THREE.Math.degToRad(-o[key].lhr.x+45) , \n                                              THREE.Math.degToRad(o[key].lhr.y-90) , \n                                              THREE.Math.degToRad(o[key].lhr.z)\n                                             );\n              op.HAND_R.object3D.position.set(-1.2*o[key].rhp.x  , 1.2*o[key].rhp.y+0.1 , -3*o[key].rhp.z); \n              op.HAND_R.object3D.rotation.set(THREE.Math.degToRad(-o[key].rhr.x+45) , \n                                              THREE.Math.degToRad(o[key].rhr.y+90) , \n                                              THREE.Math.degToRad(o[key].rhr.z)\n                                             );\n              \n\n              \n            }\n            else if(op.avatarType===2 && op.HEAD){  // TYPE 2 WITHOUT OCULUS\n              \n              op.msg.setAttribute('position',`${c.msg.offset}`);\n              \n              op.model.object3D.rotation.set(0,  THREE.Math.degToRad(o[key].rotation.y+180), 0 );\n              if(op.isWalking){ \n                  op.model.object3D.position.y = 1.4 + Math.cos(CS1.myPlayer.timePlayed/100)/10;\n              }\n              else op.model.object3D.position.y = 1.4;\n              \n              op.HEAD.object3D.rotation.set( THREE.Math.degToRad(-o[key].rotation.x/2), 0, 0 );\n              \n              op.HAND_L.object3D.position.set(1 , 0 , 0);\n              op.HAND_L.object3D.rotation.set(THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0)\n                                             );\n              op.HAND_R.object3D.position.set(-1  , 0 , 0);\n              op.HAND_R.object3D.rotation.set(THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0) , \n                                              THREE.Math.degToRad(0)\n                                             );\n            \n          \n              \n              \n            }\n            else if(op.avatarType===1){\n              op.msg.setAttribute('position',`${c.msg.offset}`);\n              op.model.setAttribute('rotation',`${-o[key].rotation.x/8} ${o[key].rotation.y+180} ${o[key].rotation.z}`);  \n            }\n            \n            \n            \n          }\n        }\n      });\n    }\n  \n    CS1.__removePlayer = id=>{\n      CS1.otherPlayers[id].parentNode.removeChild(CS1.otherPlayers[id]);\n      delete CS1.otherPlayers[id]; \n      CS1.sounds.playerLeft.play();\n    }\n  \n    CS1.__setPlayerMessage = data=>{\n      if(CS1.otherPlayers[data.id]){\n        let c = config.avatar.models[CS1.otherPlayers[data.id].faceIndex];\n        CS1.otherPlayers[data.id].msg.setAttribute('text',`value:${data.msg};\n        align:center;width:8;wrap-count:24;color:${c.msg.color}`);\n      }\n    }\n    \n  },\n\n \n});\n  \n  AFRAME.registerComponent('player', {\n    schema:{\n      me:{type:'boolean',default:false},\n      eyelevel:{default:1.6},\n      cursorcolor:{default:'crimson'},\n      rayobjects:{default:'[grabbable],.screen,.collidable,.jukebox'},\n      rayfar:{default:4},\n      speed:{default:0.2}\n    },\n    init: function () {\n      const self = this;\n      if(this.data.me){\n        CS1.myPlayer = this.el;\n        this.addCam(self);\n        this.addHands(self);\n        this.isWalking=false;\n        this.addMyListeners();\n        this.el.timePlayed = 0;\n        this.el.setAttribute('chat','');\n        this.el.setAttribute('userdata','');\n        CS1.myPlayer.spawnPos = this.el.getAttribute('position');\n        CS1.myPlayer.spawnRot = this.el.getAttribute('rotation');\n        this.totalSteps = 0;\n        this.active = false;\n      }else{\n        \n      }\n    \n    },\n    addCam: function(self){\n      const ic = document.querySelector('[camera][wasd-controls]');\n      ic.removeAttribute('wasd-controls');\n      ic.removeAttribute('look-controls');\n      ic.setAttribute('camera','active:false');\n      //console.log(ic);\n      self.cam = document.createElement('a-entity');\n      self.cam.id = 'cam';\n      CS1.cam = self.cam;\n      self.cam.setAttribute('camera','active:true');\n      self.cam.setAttribute('position',`0 ${this.data.eyelevel} 0`);\n      self.cam.setAttribute('look-controls','pointerLockEnabled:true;reverseTouchDrag:true');\n      const cc = document.createElement('a-cursor');\n      cc.id = 'cam-cursor';\n      cc.setAttribute('material',`color:${this.data.cursorcolor}`);\n      cc.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar}`);\n      self.cam.appendChild(cc);\n      self.el.appendChild(self.cam);\n      self.cam.addEventListener('loaded',_=>{\n        ic.parentNode.removeChild(ic);\n      });\n    },\n    addHands: function(self){\n      self.lh = document.createElement('a-entity');\n      self.lh.setAttribute('laser-controls','hand:left');\n      //self.lh.setAttribute('position','-1 0 0');\n      //self.lh.setAttribute('oculus-touch-controls','hand:left');\n      self.lh.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`);\n      self.rh = document.createElement('a-entity');\n      self.rh.setAttribute('laser-controls','hand:right');\n      //self.rh.setAttribute('position','1 0 0');\n      //self.rh.setAttribute('oculus-touch-controls','hand:right');\n      self.rh.setAttribute('raycaster',`objects:${this.data.rayobjects};far:${this.data.rayfar};useWorldCoordinates:true`);\n      self.el.appendChild(self.lh);\n      self.el.appendChild(self.rh);\n    },\n    addMyListeners: function(){\n      let self = this;\n      CS1.myPlayer.setAttribute('movement-controls',`speed:0;camera:#cam`);\n      document.addEventListener('gameStart',e=>{\n        //console.log('Handling gameStart on my player.');\n        self.el.id = CS1.socket.id;\n        self.el.classList = 'my-player';\n        self.active = true;\n        \n        \n        \n        if(CS1.device == 'Oculus Quest'){\n          self.setOculusCtls();\n          CS1.scene.enterVR();\n          this.lh.addEventListener('model-loaded',e=>{\n            \n            this.lh.loaded = true;\n            \n\n            const object = this.lh.getObject3D('mesh');\n            \n            if (object) {\n              object.traverse(function (node) {\n                if (node.isMesh && node.name === 'stick') {\n              \n\n                  \n                 }\n               });\n            }\n            \n            \n            \n            \n          });\n        }\n        if(CS1.device == 'Mobile'){\n          this.setTouchCtls();\n        }\n        if(CS1.device == 'Standard'){\n          this.setKeyCtls();\n        }\n          \n          \n        \n        self.setSpeed(self.data.speed);\n        \n//         CS1.sounds.playerJoined.onended = ()=>{\n//           CS1.myPlayer.setAttribute('movement-controls',`speed:${self.data.speed};camera:#cam`);\n//         }\n\n        CS1.sounds.playerJoined.play()\n        .catch(err=>{\n          //CS1.myPlayer.setAttribute('movement-controls',`speed:${self.data.speed};camera:#cam`);            \n        });\n        \n        \n        //let c = config.avatar.models[0];\n        let playerData = {};\n        let pos = Object.assign({},CS1.myPlayer.getAttribute('position'));\n        pos.x = Number(pos.x.toFixed(2));\n        pos.y = Number(pos.y.toFixed(2))+0.3;\n        pos.z = Number(pos.z.toFixed(2));\n        playerData.position = pos;\n        let rot = Object.assign({},CS1.cam.getAttribute('rotation'));\n        rot.x = Number(Number(rot.x).toFixed(1));\n        rot.y = Number(Number(rot.y).toFixed(1));\n        rot.z = Number(Number(rot.z).toFixed(1));\n        playerData.rotation = rot;\n        playerData.faceIndex = 1;\n        playerData.device = CS1.device;\n        CS1.socket.playerData.faceIndex = playerData.faceIndex;\n        CS1.myPlayer._avatarType = config.avatar.models[CS1.socket.playerData.faceIndex].type;\n        if(    (CS1.device == 'Oculus Quest') &&  (CS1.myPlayer._avatarType === 2)  ){\n          playerData.lhp = {x:0,y:0,z:0};\n          playerData.lhr = {x:0,y:0,z:0};\n          playerData.rhp = {x:0,y:0,z:0};\n          playerData.rhr = {x:0,y:0,z:0};\n        }\n        CS1.socket.emit('new-player',playerData);\n        \n        \n        \n        \n        \n        \n        \n        \n      })\n    },\n    setKeyCtls: function(){\n      document.body.addEventListener('keydown',e=>{\n        // 0=idle, 1=walk\n         switch(e.which){\n           case 87:\n           case 38:\n           case 83:\n           case 40:\n             if(!this.isWalking){\n               CS1.socket.emit('anim',1);\n               this.isWalking=true;    \n             }       \n         }\n      });\n      document.body.addEventListener('keyup',e=>{\n        // 0=idle, 1=walk\n         switch(e.which){\n           case 87:\n           case 38:\n           case 83:\n           case 40:\n             CS1.socket.emit('anim',0);\n             this.isWalking=false;\n         }\n      });\n    },\n    setTouchCtls: function(){\n      window.addEventListener('touchstart',e=>{\n        if(!this.isWalking){\n               CS1.socket.emit('anim',1);\n               this.isWalking=true;    \n             }    \n      });\n      window.addEventListener('touchend',e=>{\n         CS1.socket.emit('anim',0);\n         this.isWalking=false;\n      });\n    },\n    setOculusCtls: function(){\n      \n      let lh = this.lh.components[\"oculus-touch-controls\"];\n      let rh = this.rh.components[\"oculus-touch-controls\"];\n        \n      \n      setTimeout(()=>{\n        \n        \n        if(AFRAME.utils.device.checkHeadsetConnected()){\n          lh.el.addEventListener('thumbsticktouchstart',e=>{\n             if(!this.isWalking){\n                   CS1.socket.emit('anim',1);\n                   this.isWalking=true;    \n                 }   \n          });\n          lh.el.addEventListener('thumbsticktouchend',e=>{\n             CS1.socket.emit('anim',0);\n             this.isWalking=false; \n          });\n          rh.el.addEventListener('thumbsticktouchstart',e=>{\n             if(!this.isWalking){\n                   CS1.socket.emit('anim',1);\n                   this.isWalking=true;    \n                 }   \n          });\n          rh.el.addEventListener('thumbsticktouchend',e=>{\n             CS1.socket.emit('anim',0);\n             this.isWalking=false; \n          });\n        }\n        \n        \n        \n      },3000);\n      \n      \n    },\n    tick: function(t,dt){\n      \n    if(!this.data.me && this.active)return;\n      \n    if(++this.totalSteps%6 == 0) {\n      \n      \n      let playerData = {};\n      let pos = Object.assign({},CS1.myPlayer.getAttribute('position'));\n      pos.x = Number(pos.x.toFixed(2));\n      pos.y = Number(pos.y.toFixed(2));\n      pos.z = Number(pos.z.toFixed(2));\n      playerData.position = pos;\n      let rot = Object.assign({},CS1.cam.getAttribute('rotation'));\n      rot.x = Number(Number(rot.x).toFixed(1));\n      rot.y = Number(Number(rot.y).toFixed(1));\n      rot.z = Number(Number(rot.z).toFixed(1));\n      playerData.rotation = rot;\n      playerData.faceIndex = (CS1.socket.playerData)?CS1.socket.playerData.faceIndex:0;\n      if(   (CS1.device == 'Oculus Quest') &&  (CS1.myPlayer._avatarType === 2)  && this.lh.hasLoaded ){\n          \n          let lhp = this.lh.getAttribute('position');\n            \n          playerData.lhp = {};\n          playerData.lhp.x = Number(lhp.x.toFixed(2));\n          playerData.lhp.y = Number(lhp.y.toFixed(2));\n          playerData.lhp.z = Number(lhp.z.toFixed(2));\n          let lhr = this.lh.getAttribute('rotation')\n          playerData.lhr = {};\n          playerData.lhr.x = Number(lhr.x.toFixed(1));\n          playerData.lhr.y = Number(lhr.y.toFixed(1));\n          playerData.lhr.z = Number(lhr.z.toFixed(1));\n          let rhp = this.rh.getAttribute('position')\n          playerData.rhp = {};\n          playerData.rhp.x = Number(rhp.x.toFixed(2));\n          playerData.rhp.y = Number(rhp.y.toFixed(2));\n          playerData.rhp.z = Number(rhp.z.toFixed(2));\n          let rhr = this.rh.getAttribute('rotation')\n          playerData.rhr = {};\n          playerData.rhr.x = Number(rhr.x.toFixed(1));\n          playerData.rhr.y = Number(rhr.y.toFixed(1));\n          playerData.rhr.z = Number(rhr.z.toFixed(1));\n        \n      }\n      CS1.socket.setPlayerData(playerData);\n      CS1.socket.sendUpdateToServer();\n      if(this.totalSteps%36 == 0 && CS1.hud && CS1.hud.oxygenMeter){\n        CS1.hud.oxygenMeter.animateTo(CS1.hud.oxygenMeter.el.value-0.0035);\n      }\n      \n      \n    }\n      \n      \n    this.el.timePlayed += dt;\n      \n      \n    },\n    setSpeed: function(s){\n      if(document.querySelector('#navmesh'))\n        this.el.setAttribute('movement-controls',`constrainToNavMesh: true; speed: ${s}`);\n      else\n        this.el.setAttribute('movement-controls',`speed: ${s}`);  \n    }\n    \n  });\n  \n  \n  \n  AFRAME.registerPrimitive('a-player', {\n  defaultComponents: {\n    player: {me:true},\n  },\n\n  // Maps HTML attributes to component properties.\n  mappings: {\n    eyelevel: 'player.eyelevel',\n    cursorcolor: 'player.cursorcolor',\n    rayobjects: 'player.rayobjects',\n    rayfar: 'player.rayfar',\n    speed: 'player.speed'\n  }\n});\n  \n  \n  \n  \n  \n  \n  \n  \n  \n  \n}\n\n\n\n/*\n<a-entity id=\"my-player\" \n              position=\"0 0 0\"\n              movement-controls=\"constrainToNavMesh: true; speed: 0.2\"\n              player=\"me:true\"\n              chat\n              userdata>\n      \n        <a-entity id=\"cam\"\n                camera\n                position=\"0 1.6 0\"\n                rotation=\"31.283 -12.834 0\"\n                look-controls=\"pointerLockEnabled:true;reverseTouchDrag:true\">\n        \n          <a-cursor id=\"cam-cursor\" \n                    material=\"color:crimson\"\n                    raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4\"></a-cursor>\n\n        </a-entity>\n        \n        <a-entity id=\"left-hand\" position=\"0 1 0\" laser-controls=\"hand: left\"  \n                raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4;useWorldCoordinates:true\" ></a-entity>\n        \n      \n<a-entity id=\"right-hand\" position=\"0 1 0\" laser-controls=\"hand: right\"  \n                raycaster=\"objects:[grabbable],[sign-in],[iot-api], .screen, .collidable;far:4;useWorldCoordinates:true\" ></a-entity>\n        \n        \n          \n</a-entity>\n*/\n\n\n\n/*\n\n\np.model.addEventListener('model-loaded', () => { \n        \n          const object = p.model.getObject3D('mesh');\n\n\n          if (object) {\n            object.traverse(function (node) {\n              \n              switch(node.name){\n                case 'BODY': p.BODY = node;\n                  break;\n                case 'HAND_L': p.HAND_L = node;\n                  break;\n                case 'HAND_R': p.HAND_R = node;\n                  break;\n                case 'HEAD': p.HEAD = node;\n                  break;\n              }\n       \n             });\n          }\n        \n        \n        \n        });\n\n\n*/","import config from '../../../.data/client-config.json';\nexport function bgmlite(CS1){\n  let tracks = config.bgm.songs;\n  let audio = document.createElement('audio');\n  let bgmUrlStart = 'https://api.soundcloud.com/tracks/';\n  let bgmUrlEnd = '/stream?client_id=b9d11449cd4c64d461b8b5c30650cd06'; \n  let nextSongBtn = document.createElement('button');\n  nextSongBtn.innerHTML = \"PLAY NEXT SONG\";\n  nextSongBtn.zIndex = 100;\n  nextSongBtn.style.display = \"none\";\n  nextSongBtn.addEventListener('click',e=>{\n    CS1.bgm.playNext();\n  });\n  let ui = document.createElement('div');\n  ui.style.margin = '0 auto';\n  ui.style.width = '800px';\n  setTimeout(()=>{\n   document.body.appendChild(ui);\n   ui.appendChild(nextSongBtn);\n  },5000);\n  \n  if(config.bgm.playAll){\n   audio.addEventListener('ended',e=>{\n    console.log('bgm song ended');\n    CS1.bgm.playNext();\n   });\n}\n  \nlet currentSongIndex = 0;\n  \n  CS1.bgm = {\n    audio:audio,\n    tracks: tracks,\n    play: ()=>{\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    playTrackIndex: n=>{\n      currentSongIndex=n;\n      audio.src = bgmUrlStart + tracks[currentSongIndex] + bgmUrlEnd;\n      audio.crossorigin = 'anonymous';\n      audio.load();\n      audio.loop = !config.bgm.playAll;\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    pause: ()=>{\n      audio.pause();\n    },\n    playNext: ()=>{\n      currentSongIndex++;\n      if(currentSongIndex == tracks.length) currentSongIndex = 0;\n      audio.src = bgmUrlStart + tracks[currentSongIndex] + bgmUrlEnd;\n      audio.crossorigin = 'anonymous';\n      audio.load();\n      audio.loop = !config.bgm.playAll;\n      audio.play();\n      audio.volume = config.bgm.volume;\n    },\n    \n  }//end of CS1.bgm definition\n  \n   document.addEventListener('gameStart',e=>{\n    if(CS1.bgm.tracks.length) CS1.bgm.playTrackIndex(0);\n  })\n\n}//end of bgmlite\n\n\n","import config from '../../../.data/client-config.json';\nexport default CS1=>{\n  let socket = CS1.socket = io();\n  socket.on('connect',()=>{\n\n    if(socket.authid){\n      \n      socket.emit('reauth',socket.authid);\n      socket.id = socket.authid;\n      console.log('Emitting reauth!');\n      console.log('socket.id : ',socket.id);\n      console.log('socket.playerData : ');\n      console.log(socket.playerData);\n      console.log('socket.lastPlayerData : ');\n      console.log(socket.lastPlayerData);\n      socket.isInitialized = true;\n      \n    }else{\n      \n      socket.playerData = {position:{},rotation:{},faceIndex:0};\n      socket.lastPlayerData = {position:{},rotation:{},faceIndex:0};\n      //REVISIT\n      CS1.login = (un,pw)=>{\n          socket.emit('login',{name:un,pw:pw});\n        }  \n      \n    }\n    \n    \n    \n    \n  }); \n  \n  socket.on('login-results',data=>{\n    //console.log(data);\n    if(data.success) {\n      document.querySelector('#login').style.zIndex = -1;\n      document.querySelector('#login').style.display = 'none'; \n      document.querySelector('#login').setAttribute('hidden','');\n      CS1.myPlayer.name = data.name;\n      CS1.game.start();\n      socket.authid=socket.id;\n    }\n    else document.getElementById('login-msg').innerHTML = data.msg;\n  });\n  \n  socket.on('anim', data=>{\n    let clips = ['idle','walk'];\n    if(CS1.otherPlayers[data.id]){\n      \n      CS1.otherPlayers[data.id].isWalking = data.anim;\n      if(CS1.otherPlayers[data.id].avatarType===1)\n        CS1.otherPlayers[data.id].firstElementChild.setAttribute('animation-mixer',`clip:${clips[data.anim]}`);\n      \n    }\n  });\n  \n  socket.on('avatar', data=>{\n    if(CS1.otherPlayers[data.id])\n      CS1.otherPlayers[data.id].components.player.setAvatar(data.avatar);\n  });\n    \n  socket.on('disconnect', ()=>{\n    console.log('I have disconnected.');\n    //socket.isInitialized = false;\n  });\n  \n  socket.initializePlayerData = playerData=>{\n    socket.isInitialized = true;\n    socket.playerData = playerData;\n    socket.playerData.faceIndex = 0;\n    socket.emit('new-player', playerData);\n  }\n  \n  socket.setPlayerData = playerData=>{\n    socket.playerData = Object.assign({},playerData);\n  }\n  \n  socket.on('new-player', newPlayerObject=>{\n    if(CS1.debug)console.log('New player object received: ', newPlayerObject);\n    if(CS1.game.hasBegun && newPlayerObject.id != CS1.socket.id) {\n      setTimeout(()=>{CS1.say(`${newPlayerObject.name} has joined the game!`)},1000);\n      CS1.__addOtherPlayer(newPlayerObject);\n    }\n  });\n  \n  socket.on('initial-bodies-state', data=>{\n    if(CS1.debug){\n      console.warn('SETTING INITIAL BODIES STATE');\n      console.log(data);\n    }\n    CS1.__updateGrabbables(data);\n  });\n  \n  const isEqual=CS1.utils.isEqual;\n  //Object.is(socket.playerData, socket.lastPlayerData)\n  socket.sendUpdateToServer = ()=>{\n    \n    \n    if(!AFRAME.utils.deepEqual( socket.lastPlayerData , socket.playerData )){\n      \n      \n      socket.emit('send-update',socket.playerData);\n      \n      socket.lastPlayerData = Object.assign({},socket.playerData);\n      \n      let bodiesData = [];\n      for(var name in CS1.grabbables){\n        let b = CS1.grabbables[name];\n        if(b.states.includes(\"moving\") || b.dirty){\n          let d = {\n            name: name,\n            position: b.object3D.position,\n            scale: b.object3D.scale,\n            rotation: { \n              x: b.object3D.quaternion.x,\n              y: b.object3D.quaternion.y,\n              z: b.object3D.quaternion.z,\n              w: b.object3D.quaternion.w,\n            },\n            soundState: b.soundState\n          };\n          b.dirty = false;\n          bodiesData.push(d);\n        }\n      }\n      if(bodiesData.length > 0) {\n        socket.emit('update-bodies',bodiesData);\n        if(CS1.debug){\n          console.log(`SENDING ${bodiesData[0].name} DATA TO SERVER`);\n          console.log(bodiesData);\n        } \n      }\n      \n      \n      \n    }\n    \n\n    \n  }\n  \n  socket.on('players-already-here', o=>{\n    if(CS1.debug){\n      console.log('receiving players already here');\n      console.log(o);\n    }\n    Object.keys(o).forEach(function(key,index) {\n      CS1.__addOtherPlayer({\"id\":key,\n        \"name\":o[key].name,\n        \"data\":{\"position\": o[key].position,\n                \"rotation\": o[key].rotation,\n                \"faceIndex\":o[key].faceIndex}\n        });\n    });\n    setTimeout(()=>{CS1.say(CS1.game.announcements.welcome);},CS1.game.welcomeDelay);\n  });\n  \n  socket.on('request-for-bodies', ()=>{\n  let ibs = {};\n  for(name in CS1.grabbables){\n    if (!CS1.grabbables.hasOwnProperty(name)) continue;\n    let b = CS1.grabbables[name];\n    ibs[name] = {\n          name: name,\n          position: b.object3D.position,\n          scale: b.object3D.scale,\n          rotation: { \n            x: b.object3D.quaternion.x,\n            y: b.object3D.quaternion.y,\n            z: b.object3D.quaternion.z,\n            w: b.object3D.quaternion.w,\n          },\n          soundState: b.soundState\n        };\n  }\n    socket.emit('initial-bodies-state',ibs);\n    if(CS1.debug){\n      console.warn('SENDING INITIAL BODIES STATE TO SERVER');\n      console.log(ibs);\n    }\n});\n  \n  socket.on('update-bodies', grabbablesData=>{\n    if(CS1.game.hasBegun)CS1.__updateGrabbables(grabbablesData);\n  });\n  \n  socket.on('update-players', playersObject=>{\n    if(CS1.game && CS1.game.hasBegun)CS1.__updateOtherPlayers(playersObject);\n  });\n\n  socket.on('remove-player',id=>{\n    if(CS1.game.hasBegun && CS1.otherPlayers[id]){\n      let name = CS1.otherPlayers[id].name;\n      CS1.__removePlayer(id);\n      setTimeout(()=>{CS1.say(`${name} ${config.playerLeftMsg}`)},1500);\n    }\n  });\n  \n  socket.on('msg',data=>{\n    if(CS1.game.hasBegun)CS1.__setPlayerMessage(data);\n  });\n  \n  socket.on('failed-socket',()=>{\n    window.location.reload();\n  });\n  \n  socket.on('log',msg=>{console.log(msg)});\n  \n  socket.on('say',data=>{\n    CS1.say(data.msg,data.name);\n  });\n  \n\n\n  \n}","import config from '../config/client-config.json';\nexport default CS1=>{\n  \n  AFRAME.registerSystem('collectible', {\n  schema: {},  // System schema. Parses into `this.data`.\n\n  init: function () {\n    \n    CS1.collectibles=[];\n   \n    CS1.socket.on('collect',data=>{\n      if(!(CS1.game && CS1.game.hasBegun))return;\n      let collectedEntity = CS1.collectibles[data.index];\n      if(collectedEntity.el.components.sound__loop)collectedEntity.el.components.sound__loop.pause();\n      collectedEntity.el.setAttribute('visible',false);\n      //collectedEntity.el.setAttribute('scale','0 0 0');\n      collectedEntity.soundIsPlaying=true;\n      collectedEntity.el.components.sound__collect.playSound();\n      if(collectedEntity.data.cb && !AFRAME.utils.device.isMobile()){\n        CS1.game[collectedEntity.data.cb](collectedEntity.el);\n      }\n      collectedEntity.el.addEventListener('sound-ended',e=>{\n        collectedEntity.soundIsPlaying=false;\n        collectedEntity.pause();     \n      });\n      if(data.collector==CS1.socket.id && collectedEntity.data.affects){  \n        if(collectedEntity.data.affects.includes('avatar')){\n           let s;\n           switch(collectedEntity.el.id){\n             case 'avatar-upgrade-1':\n               s=0.35;\n               break;\n             case 'avatar-upgrade-2':\n               s=0.5\n           }\n           CS1.myPlayer.components.player.setSpeed(s);\n           console.log('speed boost');\n        }else  \n        CS1.stats[collectedEntity.data.affects].changeBy(collectedEntity.data.value);\n      }\n      if( (data.collector!=CS1.socket.id) && (collectedEntity.data.affects=='avatarUpgrade')){  \n         console.log(CS1.otherPlayers[data.collector]);\n        let m,t;\n         switch(collectedEntity.el.id){\n           case 'avatar-upgrade-1':\n              m = document.querySelector('#avatar-to-clone-1').cloneNode();\n              t = 'Skully';\n              break;\n           case 'avatar-upgrade-2':\n              m = document.querySelector('#avatar-to-clone-2').cloneNode();\n              t = 'Speedy';\n         }\n        \n         let op = CS1.otherPlayers[data.collector];\n         m.appendChild(op.msg);\n         op.msg.setAttribute('text',`value:${t};\n                                   align:center;\n                                   width:8;\n                                   wrap-count:24; \n                                   color:yellow`);\n         m.setAttribute('visible',true);\n         op.appendChild(m);\n         op.removeChild(op.model);\n         op.model = m;\n         \n      }\n    });\n    \n    CS1.socket.on('spawn-collectible',index=>{\n      let collectedEntity = CS1.collectibles[index];\n      if(collectedEntity.el.components.sound__loop)collectedEntity.el.components.sound__loop.play();\n      collectedEntity.el.setAttribute('visible',true);\n      //collectedEntity.el.setAttribute('scale','1 1 1');\n      collectedEntity.play();\n    });\n\n    CS1.socket.on('request-for-collectibles',()=>{\n      let d=[];\n      CS1.collectibles.forEach(c=>{\n        d.push({spawns:c.data.spawns,spawnDelay:c.data.spawnDelay});\n      });\n      CS1.socket.emit('initial-collectibles-state', d);\n    });\n    \n    \n    \n    \n    \n  },\n\n \n});\n  \n  \n  AFRAME.registerComponent(\"collectible\", {\n\tschema: {\n    threshold: {type: 'number', default: 2.7},\n    soundCollect: {type: 'string',default:'https://cdn.glitch.com/f8abb766-9950-44ff-9adb-2f5f53fdaf1b%2Fpowerup_1.mp3?1552158629039'},\n    soundLoop: {},\n    cb:{type:'string',default:''},\n    affects:{type:'string',default:''},\n    value:{type:'number',default:1},\n    spawns:{type:'boolean',default:false},\n    spawnDelay:{type:'number',default:5}\n\t},\n\tinit: function()\n\t{\n    \n    this.el.setAttribute('sound__collect',`src:url(${this.data.soundCollect})`);\n    if(this.data.soundLoop)this.el.setAttribute('sound__loop',`src:url(${this.data.soundLoop});autoplay:true;loop:true`);\n    CS1.collectibles.push(this);\n    console.log('running collectible init');\n    this.soundIsPlaying=false;\n    \n    \n      \n  }, \n\ttick: function()\n\t{   \n     if((this.el.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold)&&\n          this.data.affects!='avatarUpgrade'){ \n       this.collect();\n     }\n     if(this.data.affects=='avatarUpgrade' &&\n        (this.el.parentElement.object3D.position.distanceTo(CS1.myPlayer.object3D.position) < this.data.threshold) ){\n       this.collect();\n     }\n\t\t\n\t},\n  \n  collect: function(){\n    if(this.soundIsPlaying)return;\n    if(CS1.socket.disconnected){\n      if(this.el.components.sound__loop)this.el.components.sound__loop.pause();\n      this.el.setAttribute('visible',false);\n      this.el.setAttribute('scale','0 0 0');\n      this.soundIsPlaying=true;\n      this.el.components.sound__collect.playSound();\n      if(this.data.cb)CS1.game[this.data.cb](this.el);\n      if(this.data.affects && this.data.affects !== 'avatarUpgrade')\n        CS1.stats[this.data.affects].animateTo(CS1.stats[this.data.affects].value+this.data.value);\n      this.el.addEventListener('sound-ended',e=>{\n        this.soundIsPlaying=false;\n        this.pause();   \n      }); \n      if(this.data.spawns){\n             setTimeout(()=>{\n                if(this.el.components.sound__loop)this.el.components.sound__loop.play();\n                this.el.setAttribute('visible',true);\n                this.el.setAttribute('scale','1 1 1');\n                this.play();\n             },this.data.spawnDelay*1000);\n           }\n    } else{\n      CS1.socket.emit('request-collection',{index: CS1.collectibles.indexOf(this)}); \n    \n    }\n \n  }\n  \n  \n})\n  \n}","export default CS1=>{\n  \n  AFRAME.registerComponent('npc', {\n    schema:{\n      waypoints:{type:'array'},\n      name:{type:'string'},\n      roam:{type:'boolean',default:false}\n    },\n    init: function () {\n      this.waypoints=this.data.waypoints;\n      this.waypointsIndex=0;\n      this.moves=0;\n      if(this.data.name){\n        this.name = this.data.name;\n      }else{\n        this.name = (CS1.npc)? `npc${CS1.npc.length}`:'npc0';\n      }\n      if(CS1.npc){\n        CS1.npc[this.name]=this;\n      }else{\n        CS1.npc={};\n        CS1.npc[this.name]=this;\n      }\n      this.addListeners();\n      CS1.socket.emit('register-npc',{name:this.name,waypoints:this.waypoints});\n      if(this.data.roam)this.requestMove();\n    },\n    addListeners: function(){\n      let self = this;\n      this.el.addEventListener('navigation-end',this.onNavigationEnd.bind(self));\n      if(!CS1.socket._callbacks[\"$npc-move\"])\n      CS1.socket.on('npc-move',data=>{\n        if(data.dest===self.dest)return;\n        CS1.npc[data.name].dest = data.dest;\n        CS1.npc[data.name].setPosition(data.pos);\n        CS1.npc[data.name].move(data.dest);\n      });\n    },\n    setWaypoints: function(waypointsArray){\n      this.waypoints = waypointsArray;\n      CS1.socket.emit('set-npc-waypoints',{name:this.name,waypoints:waypointsArray});\n    },\n    addWaypoint: function(waypoint){\n      this.waypoints.push(waypoint);\n      CS1.socket.emit('add-npc-waypoint',{name:this.name,waypoint:waypoint});\n    },\n    move: function (destination=false) {\n      this.moves++;\n      let s;\n      let dest={};\n      if(destination){\n        s = destination;\n      }else{\n        s=this.waypoints[this.waypointsIndex];\n      }\n      if(!s){\n          console.error('You must define some waypoints for your npc to roam! < npc component >');\n          return;\n      }else{\n          let a = s.split(' ');\n          dest.x=a[0];\n          dest.y=a[1];\n          dest.z=a[2];\n          if (dest) this.el.setAttribute('nav-agent', {\n            active: true,\n            destination: dest,\n            speed: 2\n          });\n      \n      }\n    },\n    setPosition: function (position) {\n      this.el.setAttribute('position',position);\n    },\n    tick: function(t,dt){\n    \n     \n    },\n    requestMove: function (dest=''){\n      CS1.socket.emit('npc-move',{\n          name:this.name,\n          pos:this.el.getAttribute('position'),\n          dest:dest \n      });\n    },\n    onNavigationEnd: function(e){\n      //this.dest=false;\n      //console.log(`NPC Navigation has ended for ${this.name}.`)\n      //console.log(e);\n      this.waypointsIndex++;\n      if( this.waypointsIndex==this.waypoints.length)this.waypointsIndex=0;\n      let d = this.waypoints[this.waypointsIndex];\n      if(this.data.roam)this.requestMove(d);\n    }\n  });\n  \n}","export default CS1=>{\n   \nAFRAME.registerComponent('userdata', {\n  init: function () {\n    //{avatar:'Mary'}\n    CS1.db = {};\n    CS1.db.set = (keyValueObject,cb)=>{\n      CS1.socket.emit('db-set', keyValueObject, cb);\n    }\n    //'avatar'\n    CS1.db.get = (key,cb)=>{\n      CS1.socket.emit('db-get', key, cb);\n    }\n  }\n  \n});\n\n}","export default CS1=>{\n  \n  AFRAME.registerComponent('iot-api', {\n    schema:{\n      LED:{type:'string',default:'on'}\n    },\n    init: function () {   \n      const self = this;\n      this.el.addEventListener('click',e=>{\n        console.log('Click detected on LED.');\n        self.toggleLED();\n      }); \n      CS1.iot = {};\n      CS1.iot.set = (keyValueObject,cb)=>{\n       CS1.socket.emit('iot-set', keyValueObject, cb);\n      }\n      CS1.iot.get = (key,cb)=>{\n        CS1.socket.emit('iot-get', key, cb);\n      }\n      CS1.socket.on('iot-update', data=>{\n        \n        console.log('LED update');\n        if(data.LED == 'on'){\n          this.onLED();\n        }else{   \n          this.offLED();\n        }\n      \n      });\n      CS1.iot.get('LED',v=>{\n        \n        console.log('LED INITIALIZE');\n        if(v == 'on'){\n          this.onLED();\n        }else{   \n          this.offLED();\n        }\n      \n      });\n    },\n    setLED: function (state) {\n      \n    },\n    offLED: function(){\n      let mat = 'color:#551818;emissiveIntensity:0';\n      this.data.LED = 'off';\n      this.el.setAttribute('material',mat);\n    },\n    onLED: function(){\n      let mat = 'color:red;emissiveIntensity:4'; \n      this.data.LED = 'on';\n      this.el.setAttribute('material',mat);\n    },\n    toggleLED: function () {\n      let mat;\n      if(this.data.LED == 'on'){\n        this.offLED();\n        CS1.iot.set({LED:'off'},()=>{});\n      }else{   \n        this.onLED();\n        CS1.iot.set({LED:'on'},()=>{});\n      }\n       \n    },\n    tick: function(t,dt){\n    \n     \n    }\n  });\n  \n}"],"names":["window","addEventListener","loadSpinner","document","createElement","className","i","appendChild","style","left","innerWidth","loadingScreen","querySelector","width","height","innerHeight","scratchMat","copyTransform","THREE","Matrix4","source","destination","matrix","copy","matrixWorld","applyMatrix","getInverse","parent","AFRAME","registerSystem","schema","init","CS1","grabbables","__updateGrabbables","grabbablesData","Object","keys","length","name","game","hasBegun","forEach","d","index","b","debug","console","log","position","object3D","scale","rotation","quaternion","socket","on","origin","id","entity","type","setAttribute","set","data","x","y","z","setRotationFromQuaternion","Quaternion","w","soundState","custom","key","value","entries","scene","grabbableName","components","grabbable","postRelease","registerComponent","remote","default","self","this","cursor","isDragging","originEl","el","proxyObject","classList","add","String","_callbacks","msg","channel","c","color","getAttribute","s","src","collectible","launchable","onGameStart","emit","nodeName","device","e","grab","setTimeout","release","removeEventListener","cursorObject","cancelBubble","detail","cursorEl","sceneEl","Object3D","visible","addState","remove","removeState","utils","checkHeadsetConnected","tick","ctrlEl","active","intersection","point","raycaster","refreshObjects","side","url","dependencies","canvas","uid","ctx","getContext","fillStyle","fillRect","dataProcessed","fetch","then","resp","json","processData","catch","err","dataToProcess","list","day","push","dt","dt_txt","temp_max","k2f","main","k","Math","round","t","visualizeData","updateCanvas","dt_width","hue","drawRectangles","material","getObject3D","map","needsUpdate","shaders","Polkadot_Shader","Sun_Shader","Jelly_Shader","Green_Dance_Shader","Cosmic_Shader","Cool_Tiles_Shader","Disco_Shader","Marching_Ants_Shader","Goo_Shader","Psycho_Shader","Ova_Shader","Thruster_Shader","Flowing_Circles_Shader","Electric_Shader","CS1_Shader","defaults","labelText","suffix","labelColor","gradientColor1","gradientColor2","max","RingDial","opts","assign","size","strokeWidth","radius","cachedValue","targetValue","isAnimating","direction","svg","defs","slice","overlay","text","label","arrow","create","prototype","createSvg","createDefs","createSlice","createOverlay","createText","createLabel","container","createElementNS","gc1","gc2","linearGradient","stop1","stop2","linearGradientBackground","r","circle","navigator","vendor","includes","fontSize","tspanSize","innerHTML","n","createArrow","arrowYOffset","m","arrowSize","arrowPosX","arrowPosY","arrowDOffset","animateStart","v","intervalOne","setInterval","p","toFixed","clearInterval","setValue","animateTo","to","a","currentScale","changeBy","amt","animateReset","polarToCartesian","centerX","centerY","angleInDegrees","angleInRadians","PI","cos","sin","describeArc","startAngle","endAngle","start","end","largeArcFlag","join","xy","floor","Meter","[object Object]","min","low","high","optimum","widget","marginTop","marginBottom","parseFloat","range","textAlign","onload","loginHTML","config","theme","overlayColor","formColor","logo","titleFontColor","gameName","formButtonColor","loginContainer","login","preventDefault","connected","sounds","playerJoined","play","zIndex","myPlayer","speed","startSpeed","say","announcements","welcome","welcomeDelay","focus","getElementById","code","update","registerShader","timeMsec","is","myOffset","myColor","vertexShader","pnoise3","fragmentShader","change","changeDimension","elPosition","from","delta","cdIsX","dots","scn","firstInitTime","Date","now","parentNode","removeChild","logs","loggers","message","loggerComponent","receiveLog","logall","registerLogger","component","apply","unregisterLogger","splice","indexOf","filter","showErrors","system","evt","onerror","errorMsg","lineNumber","column","errorObj","JSON","stringify","shift","removeAttribute","sound__launch","playSound","burst","launchSound","launch","getDir","ray","getWorldDirection","dir","launchData","controls","m1","m2","ui","box","showBox","resetShips","ship","ship2","ship3","alongpath","reset","addBlasterBall","sphere","pp","runOnce","m2b1","stats","sound","playerData","faceIndex","_avatarType","avatar","models","m2b2","m2b3","m1b1","onclick","__display__stats","m1b2","m1b3","m1b4","panels","head","ec","ctr","querySelectorAll","lh","player","rh","pause","cam","inputColor","keyboardColor","highlightColor","input","keyboard","normalKeys","dummy","submit","updateInput","blur","parseInt","updateInputQuest","AFK","template","toggleActiveMode","chatInput","top","margin","keyCode","jukebox","audio","action","songNames","zAxis","Vector3","degToRad","changeHandler","bind","event","oneOf","closed","pathPoints","curve","oldData","points","Array","warn","pointsArray","undefined","getWorldPosition","deepEqual","threeConstructor","Error","closestPointInLocalSpace","resolution","testPoint","currentRes","getLength","aTest","bTest","getPointAt","aDistance","distanceTo","bDistance","aSmaller","tangent","getTangentAt","result","location","distance","normal","normalFromTangent","tempQuaternion","lineEnd","setFromUnitVectors","applyQuaternion","LineBasicMaterial","mesh","getOrCreateObject3D","Line","lineMaterial","lineGeometry","Geometry","vertices","getPoints","setObject3D","geometry","spacing","counter","cloneMesh","Group","order","child","clone","normalize","removeObject3D","registerPrimitive","defaultComponents","draw-curve","mappings","curveref","curve-point","triggers","triggerRadius","dur","delay","loop","rotate","resetonplay","initialPosition","interval","activeTrigger","getI_","time","timeDelta","getPoint","nextInterval","nextPosition","lookAt","updateActiveTrigger","error","thruster","offset","thrusterSound","cyl","shaderfrog","uniforms","backgroundColor","g","cloneNode","gold","rotateY","firstItem","split","reduce","acc","curValue","curIndex","arr","curObj","prev","performance","toString","replace","random","substr","isEqual","other","compare","item1","item2","itemType","call","hasOwnProperty","toColor","num","randomFromArray","array","ShaderRuntime","extend","arguments","obj","l","omit","cloned","mainCamera","cubeCameras","reserved","cameraPosition","umap","float","int","vec2","Vector2","vec3","vec4","Vector4","samplerCube","sampler2D","camera","Camera","renderTarget","identifier","findBy","shaderTypes","shader","newShaderData","runningShaders","oldName","newName","shaderType","initted","shaderName","uniform","newData","uniformName","fragment","vertex","getUmap","glslType","RawShaderMaterial","viewMatrix","matrixWorldInverse","frog_runtime","clock","Clock","registerCamera","systems","hasLoaded","updateShaders","getElapsedTime","originalMaterial","shaderData","get","threshold","affects","soundIsPlaying","baseEffects","playerDistanceTo","hud","proximityGlitch","statsElement","containers","generateRegions","pointerEvents","pointsDial","energyDial","magicDial","oxygenMeter","mode","isRunning","determineDevice","welcomeMsg","voice","display","voices","speechSynthesis","getVoices","SpeechSynthesisUtterance","pitch","rate","volume","speak","sayall","printVoices","lang","soundName","Audio","scenes","otherPlayers","leftHand","rightHand","CustomEvent","bubbles","cancelable","body","dispatchEvent","fireParticles","particles","fire","getVRDisplays","displays","displayName","isMobile","mylatesttap","mbc","icon","timesince","getTime","icon2","avatars","avatarType2Add","model","HEAD","HAND_L","HAND_R","lefthand","righthand","__addOtherPlayer","newPlayerObject","avatarType","test","__updateOtherPlayers","o","op","yOffset","isWalking","timePlayed","lhp","lhr","rhp","rhr","__removePlayer","playerLeft","__setPlayerMessage","me","eyelevel","cursorcolor","rayobjects","rayfar","addCam","addHands","addMyListeners","spawnPos","spawnRot","totalSteps","ic","cc","_","setOculusCtls","enterVR","loaded","object","traverse","node","isMesh","setTouchCtls","setKeyCtls","setSpeed","pos","Number","rot","which","setPlayerData","sendUpdateToServer","tracks","bgm","songs","bgmUrlStart","bgmUrlEnd","nextSongBtn","playNext","currentSongIndex","playTrackIndex","crossorigin","load","playAll","bgmlite","io","authid","lastPlayerData","isInitialized","un","pw","success","clips","anim","firstElementChild","setAvatar","initializePlayerData","bodiesData","states","dirty","ibs","playersObject","playerLeftMsg","reload","collectibles","collectedEntity","sound__loop","sound__collect","cb","collector","spawns","spawnDelay","soundCollect","soundLoop","collect","parentElement","disconnected","waypoints","roam","waypointsIndex","moves","npc","addListeners","requestMove","onNavigationEnd","dest","setPosition","move","setWaypoints","waypointsArray","addWaypoint","waypoint","db","keyValueObject","userdata","LED","toggleLED","iot","onLED","offLED","setLED","state","iotAPI"],"mappings":"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"}